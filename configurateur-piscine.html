<!doctype html>
<html lang="fr" class="theme-piscine">
<head>
  <meta charset="utf-8">
  <title>Configuration piscine bois ‚Äî Estimation en ligne | LC Cr√©ation</title>
  <meta name="description" content="Configurez votre piscine en bois en quelques √©tapes : pack Essentiel, Confort ou Luxe, options principales et obtenez une estimation indicative par e-mail.">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="./styles.css?v=36">

  <style>
    :root {
      --lc-gold: #d4af37;
      --lc-gold-soft: rgba(212,175,55,0.22);
      --lc-night: #020617;
    }
html, body {
  width: 100%;
  overflow-x: hidden;
}

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #020617;
      color: #0f172a;
      margin: 0;
    }

    .page-config {
      min-height: 100vh;
      background: radial-gradient(circle at top left, #0b1220 0, #020617 55%);
      color: #e5e7eb;
    }

    header {
      background: transparent;
      border-bottom: 1px solid rgba(148, 163, 184, 0.35);
    }

    .container {
      max-width: 1120px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }

    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1.5rem;
      padding: 0.9rem 0;
    }

    .brand img {
  display: block;
  max-height: 58px;
  max-width: 100%;
  height: auto;
}

    nav a {
      margin-left: 1.2rem;
      text-decoration: none;
      font-size: 0.95rem;
      color: #e5e7eb;
    }

    nav a:hover {
      color: var(--lc-gold);
    }

    nav a[href="./piscines.html"] {
      position: relative;
      color: var(--lc-gold);
      font-weight: 600;
    }

    nav a[href="./piscines.html"]::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -4px;
      width: 100%;
      height: 2px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(212,175,55,0.05), var(--lc-gold), rgba(212,175,55,0.05));
    }

    /* HERO CONFIGURATEUR */

    .config-hero {
      padding: 3.2rem 1.5rem 1.4rem;
    }

    .config-hero-inner {
      max-width: 1120px;
      margin: 0 auto;
      text-align: center;
    }

    .config-hero h1 {
      font-size: 2.2rem;
      margin-bottom: 0.5rem;
    }

    .config-hero p {
      font-size: 0.98rem;
      max-width: 640px;
      margin: 0 auto;
      opacity: 0.9;
      line-height: 1.7;
    }

    .config-badge {
      display: inline-block;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      padding: 0.25rem 0.7rem;
      border-radius: 999px;
      border: 1px solid var(--lc-gold-soft);
      color: #fef9c3;
      background: rgba(24, 24, 27, 0.8);
      margin-bottom: 0.6rem;
    }

    .config-note {
      font-size: 0.84rem;
      margin-top: 0.7rem;
      opacity: 0.7;
    }

    /* CONTENEUR */

    .config-wrapper {
      max-width: 1120px;
      margin: 0 auto 3rem;
      padding: 0 1.5rem;
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 2rem;
      align-items: flex-start;
    }

    @media (max-width: 900px) {
      .config-wrapper {
        grid-template-columns: 1fr;
      }
    }

    .config-card {
      background: rgba(15, 23, 42, 0.96);
      border-radius: 22px;
      padding: 1.8rem 1.6rem;
      border: 1px solid rgba(148, 163, 184, 0.5);
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.45);
    }

    .config-steps-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.2rem;
    }

    .config-steps-header h2 {
      font-size: 1.2rem;
      margin: 0;
    }

    .config-step-indicator {
      font-size: 0.82rem;
      opacity: 0.8;
    }

    .config-step-indicator strong {
      color: var(--lc-gold);
    }

    .config-steps {
      display: flex;
      gap: 0.4rem;
      margin-bottom: 1.4rem;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .config-step-pill {
      flex: 1;
      text-align: center;
      padding: 0.35rem 0.5rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: #9ca3af;
      background: rgba(15, 23, 42, 0.9);
      white-space: nowrap;
    }

    .config-step-pill.active {
      border-color: var(--lc-gold);
      background: radial-gradient(circle at top left, #1f2937, #020617);
      color: #fefce8;
    }

    .config-step {
      display: none;
    }

    .config-step.active {
      display: block;
    }

    .config-group {
      margin-bottom: 1.25rem;
    }

    .config-group label {
      display: block;
      font-size: 0.9rem;
      margin-bottom: 0.25rem;
    }

    .config-group small {
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .config-input,
    .config-select {
      width: 100%;
      padding: 0.75rem 0.8rem;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      font-size: 0.92rem;
      box-sizing: border-box;
    }

    .config-input::placeholder {
      color: #6b7280;
    }

    .config-radio-group {
      display: grid;
      gap: 0.5rem;
      margin-top: 0.3rem;
    }

    .config-radio-option {
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 0.6rem 0.7rem;
      display: flex;
      align-items: flex-start;
      gap: 0.55rem;
      cursor: pointer;
      background: rgba(15, 23, 42, 0.9);
      font-size: 0.9rem;
    }

    .config-radio-option input {
      margin-top: 0.2rem;
    }

    .config-radio-title {
      font-weight: 500;
      margin-bottom: 0.1rem;
    }

    .config-radio-desc {
      font-size: 0.82rem;
      opacity: 0.8;
    }

    .config-radio-option.active {
      border-color: var(--lc-gold);
      box-shadow: 0 0 0 1px rgba(212, 175, 55, 0.65);
    }
.config-check-group {
  display: grid;
  gap: 0.5rem;
  margin-top: 0.3rem;
}

.config-check-option {
  border-radius: 14px;
  border: 1px solid rgba(148, 163, 184, 0.7);
  padding: 0.6rem 0.7rem;
  display: flex;
  align-items: flex-start;
  gap: 0.55rem;
  cursor: pointer;
  background: rgba(15, 23, 42, 0.9);
  font-size: 0.9rem;
}

.config-check-option input {
  margin-top: 0.2rem;
}

.config-check-option-title {
  font-weight: 500;
  margin-bottom: 0.1rem;
}

.config-check-option-desc {
  font-size: 0.82rem;
  opacity: 0.8;
}
.config-check-option.active {
  border-color: var(--lc-gold);
  box-shadow: 0 0 0 1px rgba(212, 175, 55, 0.65);
}

    .config-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.8rem;
      margin-top: 1.4rem;
    }

    .config-nav-left {
      flex: 1;
    }

    .config-nav-right {
      display: flex;
      gap: 0.6rem;
    }

    .btn-primary,
    .btn-secondary,
    .btn-text {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.75rem 1.6rem;
      border-radius: 999px;
      font-size: 0.9rem;
      font-weight: 500;
      text-decoration: none;
      cursor: pointer;
      border: 1px solid transparent;
      transition: all 0.18s ease-out;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--lc-gold), #f6e1a4);
      color: #111827;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.3);
    }

    .btn-primary:hover {
      filter: brightness(1.04);
      transform: translateY(-1px);
      box-shadow: 0 22px 55px rgba(0, 0, 0, 0.35);
    }

    .btn-secondary {
      background: transparent;
      color: #e5e7eb;
      border-color: rgba(148, 163, 184, 0.9);
    }

    .btn-secondary:hover {
      background: rgba(15, 23, 42, 0.9);
    }

    .btn-text {
      background: transparent;
      color: #9ca3af;
      padding-inline: 0;
    }

    .btn-text:hover {
      color: #e5e7eb;
    }

    /* PANNEAU R√âCAP / ESTIMATION */

    .config-summary-card {
      background: #f9fafb;
      color: #020617;
      border-radius: 22px;
      padding: 1.8rem 1.6rem;
      box-shadow: 0 24px 60px rgba(15, 23, 42, 0.18);
      border: 1px solid rgba(148, 163, 184, 0.5);
    }

    .config-summary-card h2 {
      font-size: 1.15rem;
      margin-top: 0;
      margin-bottom: 0.6rem;
    }

    .config-summary-card p {
      font-size: 0.9rem;
      margin: 0 0 0.8rem;
      line-height: 1.6;
    }

    .config-summary-section {
      border-top: 1px solid rgba(148, 163, 184, 0.35);
      padding-top: 0.9rem;
      margin-top: 0.9rem;
      font-size: 0.9rem;
    }

    .config-summary-list {
      list-style: none;
      padding: 0;
      margin: 0;
      font-size: 0.9rem;
    }

    .config-summary-list li + li {
      margin-top: 0.25rem;
    }

    .config-price-zone {
      margin-top: 1rem;
      padding: 0.9rem 0.8rem;
      border-radius: 16px;
      background: #020617;
      color: #f9fafb;
      border: 1px solid rgba(148, 163, 184, 0.6);
    }

    .config-price-label {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.09em;
      opacity: 0.8;
      margin-bottom: 0.25rem;
    }

    .config-price-value {
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--lc-gold);
    }

    .config-price-note {
      font-size: 0.78rem;
      opacity: 0.8;
      margin-top: 0.3rem;
    }

    .config-legal {
      margin-top: 0.9rem;
      font-size: 0.76rem;
      opacity: 0.75;
    }

    /* MOBILE HEADER */

    @media (max-width: 640px) {
      .topbar {
        flex-direction: column;
        align-items: center;
        gap: 0.6rem;
        padding-inline: 1rem;
      }

      .brand {
        width: 100%;
        display: flex;
        justify-content: center;
      }

      .brand img {
        max-width: 300px;
        width: 90%;
      }

      nav {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.5rem 0.9rem;
      }

      nav a {
        margin: 0;
      }

      .config-wrapper {
        padding-inline: 1.2rem;
      }

      .config-card,
      .config-summary-card {
        padding: 1.5rem 1.3rem;
      }

      .config-steps {
        flex-direction: column;
      }
      @media (max-width: 640px) {
  .config-nav {
    flex-direction: column;
    align-items: stretch;
  }

  .config-nav-left {
    width: 100%;
  }

  .config-nav-right {
    width: 100%;
    flex-direction: column;
  }

  .btn-primary,
  .btn-secondary {
    width: 100%;
    justify-content: center;
  }
}

  </style>
</head>
<body class="page-config">

<header>
  <div class="topbar container">
    <div class="brand">
      <img src="./logo-amenagement-cropped.png" alt="LC Cr√©ation">
    </div>
    <nav>
      <a href="./index.html">Am√©nagements ext√©rieurs</a>
      <a href="./piscines.html">Piscines bois</a>
      <a href="./contact.html">Contact</a>
    </nav>
  </div>
</header>

<main>

  <!-- HERO CONFIG -->
  <section class="config-hero">
    <div class="config-hero-inner">
      <div class="config-badge">Configuration piscine bois</div>
      <h1>Configurez votre piscine bois et obtenez une estimation indicative</h1>
      <p>
        En quelques √©tapes, choisissez votre pack (Essentiel, Confort, Luxe) et les options principales.
        Nous vous affichons une estimation indicative et vous la recevrez par e-mail, sans engagement.
      </p>
      <p class="config-note">
        Les montants restent indicatifs. Le prix final est confirm√© apr√®s visite sur place et √©tude de votre terrain.
      </p>
    </div>
  </section>

  <!-- CONTENU -->
  <section class="config-wrapper">

    <!-- COLONNE GAUCHE : FORMULAIRE / √âTAPES -->
    <div class="config-card" id="config-form">

      <div class="config-steps-header">
        <h2>Votre projet</h2>
        <div class="config-step-indicator">
          √âtape <strong id="config-step-current">1</strong> / <span id="config-step-total">4</span>
        </div>
      </div>

      <div class="config-steps">
        <div class="config-step-pill active" data-step-pill="1">Projet</div>
        <div class="config-step-pill" data-step-pill="2">Pack</div>
        <div class="config-step-pill" data-step-pill="3">Options</div>
        <div class="config-step-pill" data-step-pill="4">Coordonn√©es</div>
      </div>

   <!-- ETAPE 1 : PROFIL & TERRAIN -->
<div class="config-step active" data-step="1">

  <!-- Type de projet -->
  <div class="config-group">
    <label for="config-type-projet">Type de projet</label>
    <div class="config-radio-group" id="config-type-projet">

      <label class="config-radio-option active">
        <input type="radio" name="type_projet" value="Piscine seule" checked>
        <div>
          <div class="config-radio-title">Piscine seule</div>
          <div class="config-radio-desc">
            Vous voulez d‚Äôabord installer la piscine, le reste pourra suivre plus tard.
          </div>
        </div>
      </label>

      <label class="config-radio-option">
        <input type="radio" name="type_projet" value="Piscine + terrasse / plage">
        <div>
          <div class="config-radio-title">Piscine + terrasse / plage</div>
          <div class="config-radio-desc">
            Nous r√©fl√©chissons aussi √† l‚Äôespace autour (terrasse, plage, margelles).
          </div>
        </div>
      </label>

      <label class="config-radio-option">
        <input type="radio" name="type_projet" value="Piscine + r√©am√©nagement complet du jardin">
        <div>
          <div class="config-radio-title">Piscine + r√©am√©nagement complet du jardin</div>
          <div class="config-radio-desc">
            Projet global : piscine, circulations, plantations, √©clairage, etc.
          </div>
        </div>
      </label>

    </div>
  </div>

  <!-- Terrain -->
  <div class="config-group">
    <label for="config-terrain">Votre terrain est plut√¥t‚Ä¶</label>
    <select id="config-terrain" class="config-select">
      <option value="Plat" selected>Plat</option>
      <option value="L√©g√®rement en pente">L√©g√®rement en pente</option>
      <option value="Fortement en pente / acc√®s complexe">Fortement en pente / acc√®s complexe</option>
    </select>
    <small>Cette information nous aide √† estimer la complexit√© du terrassement.</small>
  </div>

  <!-- Code postal -->
  <div class="config-group">
    <label for="config-code-postal">Code postal du chantier</label>
    <input
      type="text"
      id="config-code-postal"
      class="config-input"
      placeholder="Ex. 1400 Nivelles"
    >
    <small>Nous intervenons en Brabant Wallon et sur Bruxelles. Indiquez la ville du projet.</small>
  </div>

  <!-- Pose souhait√©e (BIEN DANS STEP 1) -->
  <div class="config-group">
    <label>Pose souhait√©e</label>
    <div class="config-radio-group" id="config-pose">

      <label class="config-radio-option active">
        <input type="radio" name="pose" value="Hors-sol" checked>
        <div>
          <div class="config-radio-title">Hors-sol</div>
          <div class="config-radio-desc">Pose rapide, chantier l√©ger.</div>
        </div>
      </label>

      <label class="config-radio-option">
        <input type="radio" name="pose" value="Semi-enterr√©e">
        <div>
          <div class="config-radio-title">Semi-enterr√©e</div>
          <div class="config-radio-desc">Terrassement partiel, rendu plus int√©gr√©.</div>
        </div>
      </label>

      <label class="config-radio-option">
        <input type="radio" name="pose" value="Enterr√©e">
        <div>
          <div class="config-radio-title">Enterr√©e</div>
          <div class="config-radio-desc">Terrassement complet et drainage.</div>
        </div>
      </label>

    </div>

    <small>Les prix semi-enterr√©s et enterr√©s s‚Äôentendent hors √©vacuation des terres.</small>
  </div>

</div>
<!-- FIN ETAPE 1 -->

    

           <!-- ETAPE 2 : PACK -->
      <div class="config-step" data-step="2">
        <div class="config-group">
          <label>Choisissez votre pack</label>
          <div class="config-radio-group" id="config-pack">
            <label class="config-radio-option active">
              <input type="radio" name="pack" value="Essentiel" checked>
              <div>
                <div class="config-radio-title">Essentiel</div>
                <div class="config-radio-desc">
                  5,20 √ó 3,20 √ó 1,33 m ‚Äî acc√®s intelligent √† la piscine bois, id√©al pour un premier projet.
                  Base indicative : ~16 500 ‚Ç¨ TVAC.
                </div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="pack" value="Confort">
              <div>
                <div class="config-radio-title">Confort</div>
                <div class="config-radio-desc">
                  6,20 √ó 4,20 √ó 1,33 m ‚Äî format familial, options techniques plus √©volu√©es.
                  Base indicative : ~19 800 ‚Ç¨ TVAC.
                </div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="pack" value="Luxe">
              <div>
                <div class="config-radio-title">Luxe</div>
                <div class="config-radio-desc">
                  8,15 √ó 4,20 √ó 1,46 m ‚Äî exp√©rience haut de gamme, confort maximal et √©quipements complets.
                  Base indicative : ~24 000 ‚Ç¨ TVAC.
                </div>
              </div>
            </label>
          </div>
        </div>

        <div class="config-group">
          <label for="config-budget">Budget global envisag√©</label>
          <select id="config-budget" class="config-select">
            <option value="15-20k">15 000 ‚Äì 20 000 ‚Ç¨</option>
            <option value="20-30k" selected>20 000 ‚Äì 30 000 ‚Ç¨</option>
            <option value="30-40k">30 000 ‚Äì 40 000 ‚Ç¨</option>
            <option value="40k+">Plus de 40 000 ‚Ç¨</option>
          </select>
        </div>
      </div>

            <!-- ETAPE 3 : OPTIONS -->
      <div class="config-step" data-step="3">
        <!-- Chauffage -->
        <div class="config-group">
          <label>Chauffage de l‚Äôeau</label>
          <div class="config-radio-group" id="config-chauffage">
            <label class="config-radio-option active">
              <input type="radio" name="chauffage" value="Pas de chauffage" checked>
              <div>
                <div class="config-radio-title">Pas de chauffage</div>
                <div class="config-radio-desc">Usage surtout en √©t√©, sans pompe √† chaleur.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="chauffage" value="Pompe √† chaleur">
              <div>
                <div class="config-radio-title">Pompe √† chaleur</div>
                <div class="config-radio-desc">Pour prolonger la saison de baignade et stabiliser la temp√©rature.</div>
              </div>
            </label>
          </div>
        </div>

        <!-- Traitement -->
        <div class="config-group">
          <label>Traitement / automatisation</label>
          <div class="config-radio-group" id="config-traitement">
            <label class="config-radio-option active">
              <input type="radio" name="traitement" value="Traitement manuel" checked>
              <div>
                <div class="config-radio-title">Traitement manuel</div>
                <div class="config-radio-desc">Contr√¥le manuel du chlore et du pH, solution la plus simple.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="traitement" value="√âlectrolyseur sel">
              <div>
                <div class="config-radio-title">√âlectrolyseur au sel</div>
                <div class="config-radio-desc">Plus de confort au quotidien, moins de produits √† manipuler.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="traitement" value="√âlectrolyseur + r√©gulation pH">
              <div>
                <div class="config-radio-title">√âlectrolyseur + r√©gulation pH</div>
                <div class="config-radio-desc">Pilotage plus automatis√©, confort d‚Äôentretien maximal.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="traitement" value="Pompe doseuse">
              <div>
                <div class="config-radio-title">Pompe doseuse</div>
                <div class="config-radio-desc">Pompe doseuse automatique (pH / chlore liquide) pour stabiliser l‚Äôeau au quotidien.</div>
              </div>
            </label>
          </div>
        </div>

        <!-- Couverture / s√©curit√© -->
               <!-- B√¢ches & enrouleur -->
        <div class="config-group">
          <label>B√¢ches & enrouleur</label>
          <div class="config-check-group" id="config-baches">
            <label class="config-check-option">
              <input type="checkbox" name="bache" value="B√¢che √©t√©">
              <div>
                <div class="config-check-option-title">B√¢che √©t√©</div>
                <div class="config-check-option-desc">B√¢che √† bulles pour limiter l‚Äô√©vaporation et garder la chaleur.</div>
              </div>
            </label>
            <label class="config-check-option">
              <input type="checkbox" name="bache" value="B√¢che hiver">
              <div>
                <div class="config-check-option-title">B√¢che hiver</div>
                <div class="config-check-option-desc">B√¢che opaque pour la mise en hivernage du bassin.</div>
              </div>
            </label>
            <label class="config-check-option">
              <input type="checkbox" name="bache" value="Enrouleur inox">
              <div>
                <div class="config-check-option-title">Enrouleur inox</div>
                <div class="config-check-option-desc">Enrouleur inox pour manipuler facilement la b√¢che √©t√©.</div>
              </div>
            </label>
          </div>
        </div>

        <!-- Couverture / s√©curit√© ‚Äúhaut de gamme‚Äù -->
        <div class="config-group">
          <label>Couverture / s√©curit√©</label>
          <div class="config-radio-group" id="config-couverture">
            <label class="config-radio-option active">
              <input type="radio" name="couverture" value="Aucune couverture sp√©cifique" checked>
              <div>
                <div class="config-radio-title">√Ä d√©finir ensemble</div>
                <div class="config-radio-desc">Nous verrons ensemble la solution la plus adapt√©e √† votre projet.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="couverture" value="Couverture √† barres">
              <div>
                <div class="config-radio-title">Couverture √† barres</div>
                <div class="config-radio-desc">S√©curit√© renforc√©e et meilleure isolation.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="couverture" value="Volet √† lamelles manuel">
              <div>
                <div class="config-radio-title">Volet √† lamelles manuel</div>
                <div class="config-radio-desc">Volet hors-sol √† lamelles, man≈ìuvre manuelle, haut niveau de s√©curit√©.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="couverture" value="Volet √† lamelles motoris√©">
              <div>
                <div class="config-radio-title">Volet √† lamelles motoris√©</div>
                <div class="config-radio-desc">Volet motoris√©, confort d‚Äôusage maximal et esth√©tique soign√©e.</div>
              </div>
            </label>
          </div>
        </div>

        <!-- Entretien -->
        <div class="config-group">
          <label>Entretien</label>
          <div class="config-radio-group" id="config-entretien">
            <label class="config-radio-option active">
              <input type="radio" name="entretien" value="Sans robot" checked>
              <div>
                <div class="config-radio-title">Sans robot</div>
                <div class="config-radio-desc">Entretien manuel classique.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="entretien" value="Avec robot nettoyeur">
              <div>
                <div class="config-radio-title">Avec robot nettoyeur</div>
                <div class="config-radio-desc">Robot autonome pour faciliter l‚Äôentretien du bassin.</div>
              </div>
            </label>
          </div>
        </div>

        <!-- Confort & loisirs -->
        <div class="config-group">
          <label>Confort & loisirs</label>
          <div class="config-check-group" id="config-loisir">
            <label class="config-check-option">
              <input type="checkbox" name="loisir" value="√âclairage LED couleur (RGB)">
              <div>
                <div class="config-check-option-title">√âclairage LED couleur</div>
                        <div class="config-check-option-desc">
          Spots LED RGB pour changer l‚Äôambiance du bassin.
          Dans les packs Confort et Luxe, un √©clairage LED blanc est d√©j√† inclus&nbsp;: cette option permet de passer en couleur.
        </div>

              </div>
            </label>
            <label class="config-check-option">
              <input type="checkbox" name="loisir" value="Douche solaire ext√©rieure">
              <div>
                <div class="config-check-option-title">Douche solaire ext√©rieure</div>
                <div class="config-check-option-desc">Douche solaire pratique avant et apr√®s la baignade.</div>
              </div>
            </label>
            <label class="config-check-option">
              <input type="checkbox" name="loisir" value="Nage √† contre-courant">
              <div>
                <div class="config-check-option-title">Nage √† contre-courant</div>
                <div class="config-check-option-desc">√âquipement sportif pour transformer votre bassin en couloir de nage.</div>
              </div>
            </label>
          </div>
        </div>
      </div>
      <!-- √âvacuation des terres (cas par cas) -->
<div class="config-group" id="config-evac-block" style="margin-top:1.5rem;">
  <label>√âvacuation des terres</label>

  <div class="config-radio-group" id="config-evac">
    <label class="config-radio-option active">
      <input type="radio" name="evacuation" value="Non" checked>
      <div>
        <div class="config-radio-title">Pas d‚Äô√©vacuation</div>
        <div class="config-radio-desc">Les terres peuvent √™tre √©tal√©es sur place.</div>
      </div>
    </label>

    <label class="config-radio-option">
      <input type="radio" name="evacuation" value="Oui">
      <div>
        <div class="config-radio-title">√âvacuation n√©cessaire</div>
        <div class="config-radio-desc">Selon le terrain et l‚Äôacc√®s, un volume peut √™tre √©vacu√©.</div>
      </div>
    </label>
  </div>

  <div id="config-evac-volume-row" style="display:none; margin-top:0.8rem;">
    <label for="config-evac-m3">Volume estim√© (m¬≥)</label>
    <input type="number" id="config-evac-m3" class="config-input"
           min="0" step="1" value="0">
    <small>Estimation automatique selon pack, ajustable apr√®s visite si besoin.</small>
  </div>
</div>

<!-- Terrasse / plage autour -->
<div class="config-group" id="config-plage-block">
  <label>Plage / terrasse autour de la piscine</label>

  <div class="config-radio-group" id="config-plage-materiau">
    <label class="config-radio-option active">
      <input type="radio" name="plage_materiau" value="Aucune" checked>
      <div>
        <div class="config-radio-title">Pas de plage / terrasse</div>
        <div class="config-radio-desc">Je souhaite uniquement la piscine.</div>
      </div>
    </label>

    <label class="config-radio-option">
      <input type="radio" name="plage_materiau" value="Bois">
      <div>
        <div class="config-radio-title">Terrasse en bois</div>
        <div class="config-radio-desc">Bois trait√© classe IV, rendu naturel et chaleureux.</div>
      </div>
    </label>

    <label class="config-radio-option">
      <input type="radio" name="plage_materiau" value="Composite">
      <div>
        <div class="config-radio-title">Composite imitation bois</div>
        <div class="config-radio-desc">Z√©ro entretien, look bois haut de gamme.</div>
      </div>
    </label>

    <label class="config-radio-option">
      <input type="radio" name="plage_materiau" value="Gres cerame">
      <div>
        <div class="config-radio-title">Gr√®s c√©rame imitation pierre bleue</div>
        <div class="config-radio-desc">Style contemporain, durable, antid√©rapant.</div>
      </div>
    </label>
  </div>

  <div class="config-group" style="margin-top:12px;">
    <label for="config-plage-surface">Surface estim√©e de la terrasse (m¬≤)</label>
    <input type="number" id="config-plage-surface" class="config-input" min="0" step="0.5" value="0">
    <small>Par d√©faut, nous calculons un pourtour de ¬±1 m autour du bassin, ajustable selon votre projet.</small>
  </div>
</div>


      <!-- ETAPE 4 : COORDONN√âES -->
      <div class="config-step" data-step="4">
  <div class="config-group">
    <label for="config-prenom">Pr√©nom *</label>
    <input type="text" id="config-prenom" class="config-input" placeholder="Votre pr√©nom">
  </div>
  <div class="config-group">
    <label for="config-nom">Nom *</label>
    <input type="text" id="config-nom" class="config-input" placeholder="Votre nom">
  </div>
  <div class="config-group">
    <label for="config-email">E-mail *</label>
    <input type="email" id="config-email" class="config-input" placeholder="exemple@domaine.be">
    <small>Nous vous envoyons votre configuration d√©taill√©e par e-mail et affichons l‚Äôestimation √† l‚Äô√©cran.</small>
  </div>
  <div class="config-group">
    <label for="config-tel">T√©l√©phone</label>
    <input type="text" id="config-tel" class="config-input" placeholder="Optionnel, mais pratique pour vous rappeler.">
  </div>

  <div class="config-group">
    <label for="config-delai">Quand souhaitez-vous r√©aliser votre projet&nbsp;?</label>
    <select id="config-delai" class="config-select">
      <option value="Je d√©couvre les prix pour l‚Äôinstant">Je d√©couvre les prix pour l‚Äôinstant</option>
      <option value="Dans les 3 √† 6 mois">Dans les 3 √† 6 mois</option>
      <option value="Dans les 6 √† 12 mois">Dans les 6 √† 12 mois</option>
      <option value="Pour la saison suivante">Pour la saison suivante</option>
    </select>
  </div>

  <div class="config-group">
    <label for="config-contact-pref">Comment pr√©f√©rez-vous que l‚Äôon vous contacte&nbsp;?</label>
    <select id="config-contact-pref" class="config-select">
      <option value="E-mail uniquement">E-mail uniquement</option>
      <option value="T√©l√©phone (en journ√©e)">T√©l√©phone (en journ√©e)</option>
      <option value="T√©l√©phone (en soir√©e)">T√©l√©phone (en soir√©e)</option>
      <option value="E-mail + t√©l√©phone si besoin">E-mail + t√©l√©phone si besoin</option>
    </select>
  </div>

  <div class="config-group">
    <label for="config-message">Pr√©cisions sur votre projet</label>
    <textarea id="config-message" class="config-input" rows="3" placeholder="Ex. : acc√®s par le c√¥t√©, terrain l√©g√®rement en pente, envie de plage autour de la piscine‚Ä¶"></textarea>
  </div>
  <div class="config-group">
    <small>* Champs obligatoires pour afficher l‚Äôestimation.</small>
  </div>
</div>


      <!-- NAVIGATION ENTRE ETAPES -->
      <div class="config-nav">
        <div class="config-nav-left">
          <button type="button" class="btn-text" id="config-back" disabled>&larr; √âtape pr√©c√©dente</button>
        </div>
        <div class="config-nav-right">
          <button type="button" class="btn-secondary" id="config-cancel">R√©initialiser</button>
          <button type="button" class="btn-primary" id="config-next">√âtape suivante</button>
        </div>
      </div>
    </div>

    <!-- COLONNE DROITE : R√âCAP & ESTIMATION -->
    <aside class="config-summary-card" id="config-summary">
      <h2>R√©capitulatif & estimation</h2>
      <p>
        √Ä chaque √©tape, nous mettons √† jour ce r√©capitulatif pour vous donner une vision claire de votre projet.
        L‚Äôestimation reste indicative et sera valid√©e apr√®s visite sur place.
      </p>

      <div class="config-summary-section">
        <strong>Projet :</strong>
        <ul class="config-summary-list">
          <li id="summary-type-projet">Piscine seule</li>
          <li id="summary-terrain">Terrain : plat</li>
          <li id="summary-code-postal">Code postal : √† pr√©ciser</li>
          <li id="summary-pose">Pose : hors-sol</li>

        </ul>
      </div>

      <div class="config-summary-section">
        <strong>Pack choisi :</strong>
        <ul class="config-summary-list">
          <li id="summary-pack">Essentiel</li>
          <li id="summary-budget">Budget envisag√© : 20 000 ‚Äì 30 000 ‚Ç¨</li>
        </ul>
      </div>

            <div class="config-summary-section">
        <strong>Options :</strong>
        <ul class="config-summary-list">
          <li id="summary-chauffage">Chauffage : pas de chauffage</li>
          <li id="summary-traitement">Traitement : manuel</li>
          <li id="summary-baches">B√¢ches : aucune s√©lection</li>
          <li id="summary-couverture">Couverture : √† d√©finir</li>
          <li id="summary-entretien">Entretien : sans robot</li>
          <li id="summary-loisir">Loisirs : aucun √©quipement sp√©cifique</li>
          <li id="summary-evac">√âvacuation : non</li>

          <li id="summary-plage">Plage/terrasse : aucune</li>

        </ul>
      </div>

<div class="config-summary-section">
  <strong>Coordonn√©es & projet :</strong>
  <ul class="config-summary-list">
    <li id="summary-delai">D√©lai souhait√© : √† pr√©ciser</li>
    <li id="summary-contact-pref">Contact : √† pr√©ciser</li>
  </ul>
</div>

      <div class="config-price-zone">
        <div class="config-price-label">Estimation indicative TVAC</div>
        <div class="config-price-value" id="summary-price">‚Äì</div>
        <div class="config-price-note">
          Estimation bas√©e sur le pack et les options s√©lectionn√©es, hors contraintes sp√©cifiques de terrain
          (acc√®s, niveau de terrassement, particularit√©s techniques).
        </div>
      </div>

      <div class="config-legal">
        En validant votre configuration, vous acceptez que LC Cr√©ation vous contacte au sujet de votre projet.
        Aucun spam, aucun engagement : uniquement li√© √† votre demande de piscine bois.
      </div>
    </aside>
  </section>

</main>

  <script>
(function () {
  const totalSteps = 4;
  let currentStep = 1;
  let estimationUnlocked = false; // tant que false, on NE montre PAS le prix
const evacVolumeRow = document.getElementById('config-evac-volume-row');
const evacM3Input = document.getElementById('config-evac-m3');

  const stepEls = document.querySelectorAll('.config-step');
  const plageBlock = document.getElementById('config-plage-block');
const plageSurfaceInput = document.getElementById('config-plage-surface');

  const pillEls = document.querySelectorAll('.config-step-pill');
  const stepCurrentEl = document.getElementById('config-step-current');
  const stepTotalEl = document.getElementById('config-step-total');
  const backBtn = document.getElementById('config-back');
  const nextBtn = document.getElementById('config-next');
  const cancelBtn = document.getElementById('config-cancel');
  const priceEl = document.getElementById('summary-price');
   
  if (stepTotalEl) stepTotalEl.textContent = totalSteps;
function scrollToConfigTop() {
  const form = document.getElementById('config-form');
  if (!form) return;

  const headerOffset = 90;
  const y = form.getBoundingClientRect().top + window.pageYOffset - headerOffset;

  window.scrollTo({
    top: y,
    behavior: 'smooth'
  });
}

function showStep(step) {
  currentStep = step;

  stepEls.forEach(el => {
    el.classList.toggle('active', Number(el.dataset.step) === step);
  });

  pillEls.forEach(el => {
    el.classList.toggle('active', Number(el.dataset.stepPill) === step);
  });

  if (stepCurrentEl) stepCurrentEl.textContent = step;
  if (backBtn) backBtn.disabled = (step === 1);
  if (nextBtn) nextBtn.textContent = (step === totalSteps) ? 'Voir mon estimation' : '√âtape suivante';

  // üëâ scroll en haut du configurateur √† chaque changement d‚Äô√©tape
  requestAnimationFrame(scrollToConfigTop);
}

 
// ====== RADIOS : cartes visuelles ======
document.querySelectorAll('.config-radio-option').forEach(option => {
  const input = option.querySelector('input[type="radio"]');
  if (!input) return;

  // clic sur la carte = coche l'input
  option.addEventListener('click', () => {
    input.checked = true;
    input.dispatchEvent(new Event('change', { bubbles: true }));
  });

  // change = met √† jour les classes
  input.addEventListener('change', () => {
    const name = input.name;
    document
      .querySelectorAll(`.config-radio-option input[name="${name}"]`)
      .forEach(r => r.closest('.config-radio-option').classList.remove('active'));

    option.classList.add('active');
    updateSummary();
  });
});


// ====== CHECKBOX : cartes visuelles ======
document.querySelectorAll('.config-check-option').forEach(option => {
  const input = option.querySelector('input[type="checkbox"]');
  if (!input) return;

  // clic sur la carte = toggle l'input
  option.addEventListener('click', (e) => {
    // si on clique sur l'input lui-m√™me, on laisse faire le navigateur
    if (e.target === input) return;

    input.checked = !input.checked;
    input.dispatchEvent(new Event('change', { bubbles: true }));
  });

  // change = met √† jour la classe active
  input.addEventListener('change', () => {
    option.classList.toggle('active', input.checked);
    updateSummary();
  });
});

 

// --- Afficher / cacher la plage selon le type de projet ---
function togglePlageVisibility() {
  const typeProjet = document.querySelector('input[name="type_projet"]:checked')?.value || '';

  const needsPlage =
    typeProjet === 'Piscine + terrasse / plage' ||
    typeProjet === 'Piscine + r√©am√©nagement complet du jardin';

  if (plageBlock) {
    plageBlock.style.display = needsPlage ? 'block' : 'none';
  }

  // Si on cache => on remet √† z√©ro pour ne pas impacter le prix
  if (!needsPlage) {
    // reset choix mat√©riau
    const radioAucune = document.querySelector('input[name="plage_materiau"][value="Aucune"]');
    if (radioAucune) radioAucune.checked = true;

    // reset surface
    if (plageSurfaceInput) plageSurfaceInput.value = 0;
  }
}

// √©couter le changement du type projet
document.querySelectorAll('input[name="type_projet"]').forEach(radio => {
  radio.addEventListener('change', () => {
    togglePlageVisibility();
    updateSummary();
  });
});

// appel initial au chargement
togglePlageVisibility();
  
     function updateSummary() {
    // Projet
    const typeProjet = document.querySelector('input[name="type_projet"]:checked')?.value || 'Piscine seule';
    document.getElementById('summary-type-projet').textContent = typeProjet;

    const terrain = document.getElementById('config-terrain').value;
    document.getElementById('summary-terrain').textContent = 'Terrain : ' + terrain.toLowerCase();

    const cp = document.getElementById('config-code-postal').value || '√† pr√©ciser';
    document.getElementById('summary-code-postal').textContent = 'Code postal : ' + cp;

    // Pack
    const pack = document.querySelector('input[name="pack"]:checked')?.value || 'Essentiel';
    document.getElementById('summary-pack').textContent = pack;
       // --- √âVACUATION : volume auto par pack ---
const defaultEvacM3 = {
  'Essentiel': 30,
  'Confort': 46,
  'Luxe': 60
};

// Si l‚Äô√©vacuation est coch√©e, on propose un volume auto (modifiable)
const evacChoice = document.querySelector('input[name="evacuation"]:checked')?.value || 'Non';

if (evacChoice === 'Oui') {
  if (evacVolumeRow) evacVolumeRow.style.display = 'block';

  const lastAuto = defaultEvacM3[pack] || 0;
  const currentVal = Number(evacM3Input?.value || 0);
  const isAutoLike = Object.values(defaultEvacM3).includes(currentVal);

  // si 0 OU si valeur auto ‚Üí on recolle l‚Äôauto du pack
  if (evacM3Input && (currentVal === 0 || isAutoLike)) {
    evacM3Input.value = lastAuto;
  }
} else {
  if (evacVolumeRow) evacVolumeRow.style.display = 'none';
  if (evacM3Input) evacM3Input.value = 0;
}

// R√©cap √©vacuation
const evacM3 = Number(evacM3Input?.value || 0);
if (evacChoice === 'Oui' && evacM3 > 0) {
  document.getElementById('summary-evac').textContent =
    '√âvacuation : oui (' + evacM3 + ' m¬≥)';
} else {
  document.getElementById('summary-evac').textContent = '√âvacuation : non';
}

    // --- Surface auto terrasse (pourtour 1 m) selon pack ---
    const packSizes = {
      'Essentiel': { L: 5.2, W: 3.2 },
      'Confort':   { L: 6.2, W: 4.2 },
      'Luxe':      { L: 8.15, W: 4.2 }
    };
    const b = 1; // pourtour 1m
    const size = packSizes[pack];
    if (size) {
      const autoSurface = (size.L + 2*b) * (size.W + 2*b) - size.L * size.W;
      const surfaceInput = document.getElementById('config-plage-surface');
      // On ne force que si surface = 0 ou vide (pour laisser l'utilisateur ajuster)
      if (surfaceInput && (!surfaceInput.value || Number(surfaceInput.value) === 0)) {
        surfaceInput.value = autoSurface.toFixed(1);
      }
    }

    const budget = document.getElementById('config-budget').value;
    let budgetLabel = '20 000 ‚Äì 30 000 ‚Ç¨';
    if (budget === '15-20k') budgetLabel = '15 000 ‚Äì 20 000 ‚Ç¨';
    if (budget === '30-40k') budgetLabel = '30 000 ‚Äì 40 000 ‚Ç¨';
    if (budget === '40k+') budgetLabel = 'Plus de 40 000 ‚Ç¨';
    document.getElementById('summary-budget').textContent = 'Budget envisag√© : ' + budgetLabel;

    // Options principales
    const chauffage = document.querySelector('input[name="chauffage"]:checked')?.value || 'Pas de chauffage';
    document.getElementById('summary-chauffage').textContent = 'Chauffage : ' + chauffage.toLowerCase();

    const traitement = document.querySelector('input[name="traitement"]:checked')?.value || 'Traitement manuel';
    document.getElementById('summary-traitement').textContent = 'Traitement : ' + traitement;

    const couverture = document.querySelector('input[name="couverture"]:checked')?.value || 'Aucune couverture sp√©cifique';
    document.getElementById('summary-couverture').textContent =
      'Couverture : ' + (couverture === 'Aucune couverture sp√©cifique' ? '√† d√©finir ensemble' : couverture);

       // Entretien (avec robot inclus dans Luxe)
    let entretienValue = document.querySelector('input[name="entretien"]:checked')?.value || 'Sans robot';
    let entretienText = '';

    if (pack === 'Luxe') {
      // Dans le pack Luxe, le robot est inclus d‚Äôoffice
      entretienValue = 'Avec robot nettoyeur';
      entretienText = 'avec robot nettoyeur (inclus dans le pack Luxe)';
    } else {
      entretienText = entretienValue.toLowerCase();
    }

    document.getElementById('summary-entretien').textContent =
      'Entretien : ' + entretienText;


    // B√¢ches & enrouleur
    const bacheChecked = Array.from(document.querySelectorAll('input[name="bache"]:checked'));
    const summaryBachesEl = document.getElementById('summary-baches');

    if (pack === 'Essentiel') {
      if (bacheChecked.length === 0) {
        summaryBachesEl.textContent = 'B√¢ches : aucune s√©lection';
      } else {
        const labelsBaches = bacheChecked.map(i => i.value);
        summaryBachesEl.textContent = 'B√¢ches : ' + labelsBaches.join(', ');
      }
    } else if (pack === 'Confort') {
      let txt = 'B√¢ches : √©t√© + hiver incluses dans le pack Confort';
      const hasEnrouleur = bacheChecked.some(i => i.value === 'Enrouleur inox');
      if (hasEnrouleur) {
        txt += ', enrouleur inox en option';
      }
      summaryBachesEl.textContent = txt;
    } else if (pack === 'Luxe') {
      summaryBachesEl.textContent = 'B√¢ches : √©t√© + hiver + enrouleur inox inclus dans le pack Luxe';
    }

    // Loisirs
        // Loisirs (LED blanc inclus dans Confort / Luxe, LED couleur en option pour tous)
    const loisirChecked = Array.from(document.querySelectorAll('input[name="loisir"]:checked'));
    const summaryLoisirEl = document.getElementById('summary-loisir');

    if (loisirChecked.length === 0) {
      if (pack === 'Essentiel') {
        summaryLoisirEl.textContent = 'Loisirs : aucun √©quipement sp√©cifique';
      } else if (pack === 'Confort' || pack === 'Luxe') {
        summaryLoisirEl.textContent = 'Loisirs : √©clairage LED blanc inclus dans le pack';
      }
    } else {
      const labels = loisirChecked.map(i => i.value);
      let baseText = '';

      if (pack === 'Confort' || pack === 'Luxe') {
        baseText = '√©clairage LED blanc inclus, options : ';
      } else {
        baseText = '';
      }

      summaryLoisirEl.textContent = 'Loisirs : ' + baseText + labels.join(', ');
    }


    // D√©lai & contact pr√©f√©r√©s
    const delai = document.getElementById('config-delai')?.value || '√† pr√©ciser';
    document.getElementById('summary-delai').textContent =
      'D√©lai souhait√© : ' + delai;

    const contactPref = document.getElementById('config-contact-pref')?.value || '√† pr√©ciser';
    document.getElementById('summary-contact-pref').textContent =
      'Contact : ' + contactPref;
// --- Plage / terrasse ---
const plageMateriau = document.querySelector('input[name="plage_materiau"]:checked')?.value || 'Aucune';
const plageSurface = Number(document.getElementById('config-plage-surface')?.value || 0);

let plageLabel = 'aucune';
if (plageMateriau !== 'Aucune' && plageSurface > 0) {
  const labelNice =
    (plageMateriau === 'Gres cerame')
      ? 'gr√®s c√©rame imitation pierre bleue'
      : plageMateriau.toLowerCase();
  plageLabel = `${labelNice} ‚Äî ${plageSurface.toFixed(1)} m¬≤`;
}

document.getElementById('summary-plage').textContent =
  'Plage/terrasse : ' + plageLabel;

   // --- ESTIMATION SIMPLE (coeff pose uniquement sur le pack) ---

const basePrices = {
  'Essentiel': 15490,
  'Confort': 19490,
  'Luxe': 23990
};

const packBase = basePrices[pack] || 0;

// 1) Options (hors plage + hors √©vacuation)
let optionsTotal = 0;

// Chauffage
if (chauffage === 'Pompe √† chaleur') optionsTotal += 3500;

// Traitement
if (traitement === '√âlectrolyseur au sel') optionsTotal += 1800;
if (traitement === '√âlectrolyseur + r√©gulation pH') optionsTotal += 3200;
if (traitement === 'Pompe doseuse') optionsTotal += 1200;

// Couverture ‚Äúhaut de gamme‚Äù
if (couverture === 'Couverture √† barres') optionsTotal += 2000;
if (couverture === 'Volet √† lamelles manuel') optionsTotal += 3800;
if (couverture === 'Volet √† lamelles motoris√©') optionsTotal += 4800;

// B√¢ches & enrouleur : logique par pack
let bachesTotal = 0;
if (pack === 'Essentiel') {
  bacheChecked.forEach(i => {
    if (i.value === 'B√¢che √©t√©') bachesTotal += 600;
    if (i.value === 'B√¢che hiver') bachesTotal += 700;
    if (i.value === 'Enrouleur inox') bachesTotal += 450;
  });
} else if (pack === 'Confort') {
  const hasEnrouleur = bacheChecked.some(i => i.value === 'Enrouleur inox');
  if (hasEnrouleur) bachesTotal += 450; // enrouleur en suppl√©ment
}
// Luxe : tout inclus ‚Üí 0
optionsTotal += bachesTotal;

// Entretien : robot en suppl√©ment uniquement pour Essentiel / Confort
if (pack !== 'Luxe' && entretienValue === 'Avec robot nettoyeur') {
  optionsTotal += 1500;
}

// Loisirs (LED blanc inclus Confort/Luxe, RGB payant pour tous)
loisirChecked.forEach(i => {
  if (i.value === '√âclairage LED couleur (RGB)') optionsTotal += 600;
  if (i.value === 'Douche solaire ext√©rieure') optionsTotal += 800;
  if (i.value === 'Nage √† contre-courant') optionsTotal += 6500;
});


// 2) Plage / terrasse (NE SUBIT PAS le coeff pose)
let plageTotal = 0;
const plagePricesPerM2 = {
  'Bois': 140,
  'Composite': 190,
  'Gres cerame': 220
};

if (plageMateriau !== 'Aucune' && plageSurface > 0) {
  plageTotal = plageSurface * (plagePricesPerM2[plageMateriau] || 0);
}


// 3) Coeff pose appliqu√© UNIQUEMENT sur le pack
const pose = document.querySelector('input[name="pose"]:checked')?.value || 'Hors-sol';

let coeffPose = 1.0;
if (pose === 'Semi-enterr√©e') coeffPose = 1.10;
if (pose === 'Enterr√©e') coeffPose = 1.20;

const packAvecPose = packBase * coeffPose;


// 4) √âvacuation (√† part, apr√®s tout)
let evacTotal = 0;
if (evacChoice === 'Oui' && evacM3 > 0) {
  const evacPricePerM3HTVA = 80;
  const evacPriceTVAC = evacPricePerM3HTVA * 1.21;
  evacTotal = evacM3 * evacPriceTVAC;
}


// 5) Total final
let price = packAvecPose + optionsTotal + plageTotal + evacTotal;


// Arrondi final au 100‚Ç¨
const rounded = Math.round(price / 100) * 100;

const nf = new Intl.NumberFormat('fr-BE', {
  style: 'currency',
  currency: 'EUR',
  maximumFractionDigits: 0
});

if (!estimationUnlocked) {
  priceEl.textContent = '‚Äî';
  return;
}

priceEl.textContent = nf.format(rounded);


// R√©cap pose (inchang√©)
document.getElementById('summary-pose').textContent =
  'Pose : ' + pose.toLowerCase();

     }


  function validateStep4() {
    const prenom = document.getElementById('config-prenom').value.trim();
    const nom = document.getElementById('config-nom').value.trim();
    const email = document.getElementById('config-email').value.trim();
    if (!prenom || !nom || !email) {
      alert('Merci de compl√©ter au minimum votre pr√©nom, nom et e-mail pour afficher votre estimation.');
      return false;
    }
    return true;
  }

  if (backBtn) {
    backBtn.addEventListener('click', () => {
      if (currentStep > 1) {
        showStep(currentStep - 1);
      }
    });
  }

if (nextBtn) {
  nextBtn.addEventListener('click', () => {
    // √âtapes 1 √† 3 : on avance simplement
    if (currentStep < totalSteps) {
      showStep(currentStep + 1);
      return;
    }

    // Derni√®re √©tape : on v√©rifie les champs obligatoires
    if (!validateStep4()) return;

    // On d√©bloque l‚Äôestimation et on met √† jour le r√©cap
    estimationUnlocked = true;
    updateSummary();

    // --- R√©cup des infos principales ---
    const prenom = document.getElementById('config-prenom').value.trim();
    const nom = document.getElementById('config-nom').value.trim();
    const emailClient = document.getElementById('config-email').value.trim();
    const tel = document.getElementById('config-tel').value.trim();
    const message = document.getElementById('config-message').value.trim();
    const codePostal = document.getElementById('config-code-postal').value.trim();

    const typeProjet = document.querySelector('input[name="type_projet"]:checked')?.value || '';
    const terrain = document.getElementById('config-terrain').value;

    const pack = document.querySelector('input[name="pack"]:checked')?.value || '';
    const budgetText = document.getElementById('summary-budget')?.textContent || '';

    const chauffageTxt = document.getElementById('summary-chauffage')?.textContent || '';
    const traitementTxt = document.getElementById('summary-traitement')?.textContent || '';
    const couvertureTxt = document.getElementById('summary-couverture')?.textContent || '';
    const entretienTxt = document.getElementById('summary-entretien')?.textContent || '';
    const loisirsTxt = document.getElementById('summary-loisir')?.textContent || '';

    const delaiTxt = document.getElementById('summary-delai')?.textContent || '';
    const contactPrefTxt = document.getElementById('summary-contact-pref')?.textContent || '';

    const estimationText = document.getElementById('summary-price')?.textContent || '‚Äî';

    // --- Payload envoy√© √† l‚ÄôAPI Vercel ---
    const payload = {
      prenom,
      nom,
      emailClient,
      tel,
      message,
      codePostal,
      terrain,
      typeProjet,
      pack,
      budgetText,
      chauffageTxt,
      traitementTxt,
      couvertureTxt,
      entretienTxt,
      loisirsTxt,
      delaiTxt,
      contactPrefTxt,
      estimationText,

      // honeypot anti-bots (champ vide)
      website: ""
    };

    // --- Envoi automatique vers l‚ÄôAPI /api/send-lead ---
    fetch("/api/send-piscine-lead", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    })
      .then(res => res.json())
      .then(data => {
        if (!data.ok) {
          throw new Error(data.error || "Erreur inconnue");
        }

        alert("Merci ! Votre demande a bien √©t√© envoy√©e. Nous vous recontactons rapidement.");
        nextBtn.disabled = true;
        nextBtn.textContent = "Demande envoy√©e ‚úÖ";
      })
      .catch(err => {
        console.error(err);
        alert("Oups, probl√®me d‚Äôenvoi. Merci de r√©essayer ou de nous appeler.");
      });
  });
}



  if (cancelBtn) {
    cancelBtn.addEventListener('click', () => {
      estimationUnlocked = false;
      window.location.reload();
    });
  }

  // Mise √† jour auto du r√©sum√©
  document.querySelectorAll('input, select, textarea').forEach(el => {
    el.addEventListener('change', updateSummary);
    el.addEventListener('input', updateSummary);
  });

  // Initial
  showStep(1);
  updateSummary();
})();
</script>

</body>
</html>
