<!doctype html>
<html lang="fr" class="theme-piscine">
<head>
  <meta charset="utf-8">
  <title>Configuration piscine bois — Estimation en ligne | LC Création</title>
  <meta name="description" content="Configurez votre piscine en bois en quelques étapes : pack Essentiel, Confort ou Luxe, options principales et obtenez une estimation indicative par e-mail.">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="./styles.css?v=36">

  <style>
    :root {
      --lc-gold: #d4af37;
      --lc-gold-soft: rgba(212,175,55,0.22);
      --lc-night: #020617;
    }
html, body {
  width: 100%;
  overflow-x: hidden;
}

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #020617;
      color: #0f172a;
      margin: 0;
    }

    .page-config {
      min-height: 100vh;
      background: radial-gradient(circle at top left, #0b1220 0, #020617 55%);
      color: #e5e7eb;
    }

    header {
      background: transparent;
      border-bottom: 1px solid rgba(148, 163, 184, 0.35);
    }

    .container {
      max-width: 1120px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }

    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1.5rem;
      padding: 0.9rem 0;
    }

    .brand img {
  display: block;
  max-height: 58px;
  max-width: 100%;
  height: auto;
}

    nav a {
      margin-left: 1.2rem;
      text-decoration: none;
      font-size: 0.95rem;
      color: #e5e7eb;
    }

    nav a:hover {
      color: var(--lc-gold);
    }

    nav a[href="./piscines.html"] {
      position: relative;
      color: var(--lc-gold);
      font-weight: 600;
    }

    nav a[href="./piscines.html"]::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -4px;
      width: 100%;
      height: 2px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(212,175,55,0.05), var(--lc-gold), rgba(212,175,55,0.05));
    }


    /* HERO CONFIGURATEUR */

    .config-hero {
      padding: 3.2rem 1.5rem 1.4rem;
    }

    .config-hero-inner {
      max-width: 1120px;
      margin: 0 auto;
      text-align: center;
    }

    .config-hero h1 {
      font-size: 2.2rem;
      margin-bottom: 0.5rem;
    }

    .config-hero p {
      font-size: 0.98rem;
      max-width: 640px;
      margin: 0 auto;
      opacity: 0.9;
      line-height: 1.7;
    }

    .config-badge {
      display: inline-block;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      padding: 0.25rem 0.7rem;
      border-radius: 999px;
      border: 1px solid var(--lc-gold-soft);
      color: #fef9c3;
      background: rgba(24, 24, 27, 0.8);
      margin-bottom: 0.6rem;
    }

    .config-note {
      font-size: 0.84rem;
      margin-top: 0.7rem;
      opacity: 0.7;
    }

    /* CONTENEUR */

    .config-wrapper {
      max-width: 1120px;
      margin: 0 auto 3rem;
      padding: 0 1.5rem;
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 2rem;
      align-items: flex-start;
    }

    @media (max-width: 900px) {
      .config-wrapper {
        grid-template-columns: 1fr;
      }
    }

    .config-card {
      background: rgba(15, 23, 42, 0.96);
      border-radius: 22px;
      padding: 1.8rem 1.6rem;
      border: 1px solid rgba(148, 163, 184, 0.5);
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.45);
    }

    .config-steps-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.2rem;
    }

    .config-steps-header h2 {
      font-size: 1.2rem;
      margin: 0;
    }

    .config-step-indicator {
      font-size: 0.82rem;
      opacity: 0.8;
    }

    .config-step-indicator strong {
      color: var(--lc-gold);
    }

    .config-steps {
      display: flex;
      gap: 0.4rem;
      margin-bottom: 1.4rem;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .config-step-pill {
      flex: 1;
      text-align: center;
      padding: 0.35rem 0.5rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: #9ca3af;
      background: rgba(15, 23, 42, 0.9);
      white-space: nowrap;
    }

    .config-step-pill.active {
      border-color: var(--lc-gold);
      background: radial-gradient(circle at top left, #1f2937, #020617);
      color: #fefce8;
    }

    .config-step {
      display: none;
    }

    .config-step.active {
      display: block;
    }

    .config-group {
      margin-bottom: 1.25rem;
    }

    .config-group label {
      display: block;
      font-size: 0.9rem;
      margin-bottom: 0.25rem;
    }

    .config-group small {
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .config-input,
    .config-select {
      width: 100%;
      padding: 0.75rem 0.8rem;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      font-size: 0.92rem;
      box-sizing: border-box;
    }

    .config-input::placeholder {
      color: #6b7280;
    }

    .config-radio-group {
      display: grid;
      gap: 0.5rem;
      margin-top: 0.3rem;
    }

    .config-radio-option {
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 0.6rem 0.7rem;
      display: flex;
      align-items: flex-start;
      gap: 0.55rem;
      cursor: pointer;
      background: rgba(15, 23, 42, 0.9);
      font-size: 0.9rem;
    }

    .config-radio-option input {
      margin-top: 0.2rem;
    }

    .config-radio-title {
      font-weight: 500;
      margin-bottom: 0.1rem;
    }

    .config-radio-desc {
      font-size: 0.82rem;
      opacity: 0.8;
    }

    .config-radio-option.active {
      border-color: var(--lc-gold);
      box-shadow: 0 0 0 1px rgba(212, 175, 55, 0.65);
    }
.config-check-group {
  display: grid;
  gap: 0.5rem;
  margin-top: 0.3rem;
}

.config-check-option {
  border-radius: 14px;
  border: 1px solid rgba(148, 163, 184, 0.7);
  padding: 0.6rem 0.7rem;
  display: flex;
  align-items: flex-start;
  gap: 0.55rem;
  cursor: pointer;
  background: rgba(15, 23, 42, 0.9);
  font-size: 0.9rem;
}

.config-check-option input {
  margin-top: 0.2rem;
}

.config-check-option-title {
  font-weight: 500;
  margin-bottom: 0.1rem;
}

.config-check-option-desc {
  font-size: 0.82rem;
  opacity: 0.8;
}
.config-check-option.active {
  border-color: var(--lc-gold);
  box-shadow: 0 0 0 1px rgba(212, 175, 55, 0.65);
}

    .config-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.8rem;
      margin-top: 1.4rem;
    }

    .config-nav-left {
      flex: 1;
    }

    .config-nav-right {
      display: flex;
      gap: 0.6rem;
    }

    .btn-primary,
    .btn-secondary,
    .btn-text {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.75rem 1.6rem;
      border-radius: 999px;
      font-size: 0.9rem;
      font-weight: 500;
      text-decoration: none;
      cursor: pointer;
      border: 1px solid transparent;
      transition: all 0.18s ease-out;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--lc-gold), #f6e1a4);
      color: #111827;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.3);
    }

    .btn-primary:hover {
      filter: brightness(1.04);
      transform: translateY(-1px);
      box-shadow: 0 22px 55px rgba(0, 0, 0, 0.35);
    }

    .btn-secondary {
      background: transparent;
      color: #e5e7eb;
      border-color: rgba(148, 163, 184, 0.9);
    }

    .btn-secondary:hover {
      background: rgba(15, 23, 42, 0.9);
    }

    .btn-text {
      background: transparent;
      color: #9ca3af;
      padding-inline: 0;
    }

    .btn-text:hover {
      color: #e5e7eb;
    }

    /* PANNEAU RÉCAP / ESTIMATION */

    .config-summary-card {
      background: #f9fafb;
      color: #020617;
      border-radius: 22px;
      padding: 1.8rem 1.6rem;
      box-shadow: 0 24px 60px rgba(15, 23, 42, 0.18);
      border: 1px solid rgba(148, 163, 184, 0.5);
    }

    .config-summary-card h2 {
      font-size: 1.15rem;
      margin-top: 0;
      margin-bottom: 0.6rem;
    }

    .config-summary-card p {
      font-size: 0.9rem;
      margin: 0 0 0.8rem;
      line-height: 1.6;
    }

    .config-summary-section {
      border-top: 1px solid rgba(148, 163, 184, 0.35);
      padding-top: 0.9rem;
      margin-top: 0.9rem;
      font-size: 0.9rem;
    }

    .config-summary-list {
      list-style: none;
      padding: 0;
      margin: 0;
      font-size: 0.9rem;
    }

    .config-summary-list li + li {
      margin-top: 0.25rem;
    }

    .config-price-zone {
      margin-top: 1rem;
      padding: 0.9rem 0.8rem;
      border-radius: 16px;
      background: #020617;
      color: #f9fafb;
      border: 1px solid rgba(148, 163, 184, 0.6);
    }

    .config-price-label {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.09em;
      opacity: 0.8;
      margin-bottom: 0.25rem;
    }

    .config-price-value {
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--lc-gold);
    }

    .config-price-note {
      font-size: 0.78rem;
      opacity: 0.8;
      margin-top: 0.3rem;
    }

    .config-legal {
      margin-top: 0.9rem;
      font-size: 0.76rem;
      opacity: 0.75;
    }
.config-liner-preview {
  margin-top: 0.8rem;
  border-radius: 18px;
  background: rgba(15, 23, 42, 0.9);
  padding: 0.75rem;
  text-align: center;
}

.config-liner-preview img {
  max-width: 100%;
  height: auto;
  display: inline-block;
  border-radius: 14px;
}

    /* MOBILE HEADER */

       @media (max-width: 640px) {
      .topbar {
        flex-direction: column;
        align-items: center;
        gap: 0.6rem;
        padding-inline: 1rem;
      }

      .brand {
        width: 100%;
        display: flex;
        justify-content: center;
      }

      .brand img {
        max-width: 300px;
        width: 90%;
      }

      nav {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.5rem 0.9rem;
      }

      nav a {
        margin: 0;
      }

      .config-wrapper {
        padding-inline: 1.2rem;
      }

      .config-card,
      .config-summary-card {
        padding: 1.5rem 1.3rem;
      }

      .config-steps {
        flex-direction: column;
      }

      /* bloc nav mobile */
      .config-nav {
        flex-direction: column;
        align-items: stretch;
      }

      .config-nav-left {
        width: 100%;
      }

      .config-nav-right {
        width: 100%;
        flex-direction: column;
      }

      .btn-primary,
      .btn-secondary {
        width: 100%;
        justify-content: center;
      }
    }

  </style>
   
 <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YLJL7PN7V3">
</script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YLJL7PN7V3');
</script>
</head>
<body class="page-config">

<header>
  <div class="topbar container">
    <div class="brand">
      <img src="./logo-amenagement-cropped.png" alt="LC Création">
    </div>
    <nav>
      <a href="./index.html">Aménagements extérieurs</a>
      <a href="./piscines.html">Piscines bois</a>
      <a href="./contact.html">Contact</a>
    </nav>
  </div>
</header>

<main>

  <!-- HERO CONFIG -->
  <section class="config-hero">
    <div class="config-hero-inner">
      <div class="config-badge">Configuration piscine bois</div>
      <h1>Configurez votre piscine bois et obtenez une estimation indicative</h1>
      <p>
        En quelques étapes, choisissez votre pack (Essentiel, Confort, Luxe) et les options principales.
        Nous vous affichons une estimation indicative et vous la recevrez par e-mail, sans engagement.
      </p>
      <p class="config-note">
        Les montants restent indicatifs. Le prix final est confirmé après visite sur place et étude de votre terrain.
      </p>
         
    </div>
  </section>

  <!-- CONTENU -->
  <section class="config-wrapper">

    <!-- COLONNE GAUCHE : FORMULAIRE / ÉTAPES -->
    <div class="config-card" id="config-form">

      <div class="config-steps-header">
        <h2>Votre projet</h2>
        <div class="config-step-indicator">
          Étape <strong id="config-step-current">1</strong> / <span id="config-step-total">4</span>
        </div>
      </div>

      <div class="config-steps">
        <div class="config-step-pill active" data-step-pill="1">Projet</div>
        <div class="config-step-pill" data-step-pill="2">Pack</div>
        <div class="config-step-pill" data-step-pill="3">Options</div>
        <div class="config-step-pill" data-step-pill="4">Coordonnées</div>
      </div>

   <!-- ETAPE 1 : PROFIL & TERRAIN -->
<div class="config-step active" data-step="1">

  <!-- Type de projet -->
  <div class="config-group">
    <label for="config-type-projet">Type de projet</label>
    <div class="config-radio-group" id="config-type-projet">

      <label class="config-radio-option active">
        <input type="radio" name="type_projet" value="Piscine seule" checked>
        <div>
          <div class="config-radio-title">Piscine seule</div>
          <div class="config-radio-desc">
            Vous voulez d’abord installer la piscine, le reste pourra suivre plus tard.
          </div>
        </div>
      </label>

      <label class="config-radio-option">
        <input type="radio" name="type_projet" value="Piscine + terrasse / plage">
        <div>
          <div class="config-radio-title">Piscine + terrasse / plage</div>
          <div class="config-radio-desc">
            Nous réfléchissons aussi à l’espace autour (terrasse, plage, margelles).
          </div>
        </div>
      </label>

      <label class="config-radio-option">
        <input type="radio" name="type_projet" value="Piscine + réaménagement complet du jardin">
        <div>
          <div class="config-radio-title">Piscine + réaménagement complet du jardin</div>
          <div class="config-radio-desc">
            Projet global : piscine, circulations, plantations, éclairage, etc.
          </div>
        </div>
      </label>

    </div>
  </div>

  <!-- Terrain -->
  <div class="config-group">
    <label for="config-terrain">Votre terrain est plutôt…</label>
    <select id="config-terrain" class="config-select">
      <option value="Plat" selected>Plat</option>
      <option value="Légèrement en pente">Légèrement en pente</option>
      <option value="Fortement en pente / accès complexe">Fortement en pente / accès complexe</option>
    </select>
    <small>Cette information nous aide à estimer la complexité du terrassement.</small>
  </div>

  <!-- Code postal -->
  <div class="config-group">
    <label for="config-code-postal">Code postal du chantier</label>
    <input
      type="text"
      id="config-code-postal"
      class="config-input"
      placeholder="Ex. 1400 Nivelles"
    >
    <small>Nous intervenons en Brabant Wallon et sur Bruxelles. Indiquez la ville du projet.</small>
  </div>

  <!-- Pose souhaitée (BIEN DANS STEP 1) -->
  <div class="config-group">
    <label>Pose souhaitée</label>
    <div class="config-radio-group" id="config-pose">

      <label class="config-radio-option active">
        <input type="radio" name="pose" value="Hors-sol" checked>
        <div>
          <div class="config-radio-title">Hors-sol</div>
          <div class="config-radio-desc">Pose rapide, chantier léger.</div>
        </div>
      </label>

      <label class="config-radio-option">
        <input type="radio" name="pose" value="Semi-enterrée">
        <div>
          <div class="config-radio-title">Semi-enterrée</div>
          <div class="config-radio-desc">Terrassement partiel, rendu plus intégré.</div>
        </div>
      </label>

      <label class="config-radio-option">
        <input type="radio" name="pose" value="Enterrée">
        <div>
          <div class="config-radio-title">Enterrée</div>
          <div class="config-radio-desc">Terrassement complet et drainage.</div>
        </div>
      </label>

    </div>

    <small>Les prix semi-enterrés et enterrés s’entendent hors évacuation des terres.</small>
  </div>

</div>
<!-- FIN ETAPE 1 -->

    

          <!-- ETAPE 2 : PACK -->
<div class="config-step" data-step="2">
  <div class="config-group">
    <label>Choisissez votre pack</label>
    <div class="config-radio-group" id="config-pack">

      <!-- Packs existants -->
      <label class="config-radio-option active">
        <input type="radio" name="pack" value="Essentiel" checked>
        <div>
          <div class="config-radio-title">Essentiel</div>
          <div class="config-radio-desc">
            5,00 × 3,20 × 1,23 m — accès intelligent à la piscine bois, idéal pour un premier projet.
            Base indicative : ~16 500 € TVAC.
          </div>
        </div>
      </label>

      <label class="config-radio-option">
        <input type="radio" name="pack" value="Confort">
        <div>
          <div class="config-radio-title">Confort</div>
          <div class="config-radio-desc">
            6,00 × 4,20 × 1,30 m — format familial, options techniques plus évoluées.
            Base indicative : ~19 800 € TVAC.
          </div>
        </div>
      </label>

      <label class="config-radio-option">
        <input type="radio" name="pack" value="Luxe">
        <div>
          <div class="config-radio-title">Luxe</div>
          <div class="config-radio-desc">
            8,35 × 4,90 × 1,36 m — expérience haut de gamme, confort maximal et équipements complets.
            Base indicative : ~24 000 € TVAC.
          </div>
        </div>
      </label>

    </div> <!-- fin .config-radio-group -->
  </div> <!-- ✅ fin .config-group (packs) -->

  <div class="config-group">
    <label for="config-budget">Budget global envisagé</label>
    <select id="config-budget" class="config-select">
      <option value="15-20k">15 000 – 20 000 €</option>
      <option value="20-30k" selected>20 000 – 30 000 €</option>
      <option value="30-40k">30 000 – 40 000 €</option>
      <option value="40k+">Plus de 40 000 €</option>
    </select>
  </div>
</div> <!-- fin .config-step 2 -->


                 <!-- ETAPE 3 : OPTIONS -->
      <div class="config-step" data-step="3">

        <!-- Couleur du liner -->
        <div class="config-group">
          <label>Couleur du liner</label>
          <div class="config-radio-group" id="config-liner">
            <label class="config-radio-option active">
              <input type="radio" name="liner_color" value="Blue" checked>
              <div>
                <div class="config-radio-title">Blue</div>
                <div class="config-radio-desc">
                  Liner bleu classique, rendu lumineux de l’eau (inclus dans le prix de base).
                </div>
              </div>
            </label>

            <label class="config-radio-option">
              <input type="radio" name="liner_color" value="Sand">
              <div>
                <div class="config-radio-title">Sand (+175&nbsp;€)</div>
                <div class="config-radio-desc">
                  Liner sable, ambiance « méditerranéenne » très douce.
                </div>
              </div>
            </label>

            <label class="config-radio-option">
              <input type="radio" name="liner_color" value="Grey">
              <div>
                <div class="config-radio-title">Grey (+175&nbsp;€)</div>
                <div class="config-radio-desc">
                  Liner gris, rendu contemporain, eau plus profonde visuellement.
                </div>
              </div>
            </label>
          </div>

          <small>Les liners Sand et Grey entraînent un supplément de 175&nbsp;€ TVAC.</small>

          <!-- Preview visuelle de la couleur sélectionnée -->
          <div class="config-liner-preview">
            <img id="config-liner-image"
                 src="./liner blue.jpg"
                 alt="Liner blue"
                 loading="lazy">
          </div>
        </div>

        <!-- Chauffage -->
        <div class="config-group">
          <label>Chauffage de l’eau</label>
          <div class="config-radio-group" id="config-chauffage">
            <label class="config-radio-option active">
              <input type="radio" name="chauffage" value="Pas de chauffage" checked>
              <div>
                <div class="config-radio-title">Pas de chauffage</div>
                <div class="config-radio-desc">Usage surtout en été, sans pompe à chaleur.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="chauffage" value="Pompe à chaleur">
              <div>
                <div class="config-radio-title">Pompe à chaleur</div>
                <div class="config-radio-desc">Pour prolonger la saison de baignade et stabiliser la température.</div>
              </div>
            </label>
          </div>
        </div>

        <!-- Traitement -->
        <div class="config-group">
          <label>Traitement / automatisation</label>
          <div class="config-radio-group" id="config-traitement">
            <label class="config-radio-option active">
              <input type="radio" name="traitement" value="Traitement manuel" checked>
              <div>
                <div class="config-radio-title">Traitement manuel</div>
                <div class="config-radio-desc">Contrôle manuel du chlore et du pH, solution la plus simple.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="traitement" value="Électrolyseur sel">
              <div>
                <div class="config-radio-title">Électrolyseur au sel</div>
                <div class="config-radio-desc">Plus de confort au quotidien, moins de produits à manipuler.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="traitement" value="Électrolyseur + régulation pH">
              <div>
                <div class="config-radio-title">Électrolyseur + régulation pH</div>
                <div class="config-radio-desc">Pilotage plus automatisé, confort d’entretien maximal.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="traitement" value="Pompe doseuse">
              <div>
                <div class="config-radio-title">Pompe doseuse</div>
                <div class="config-radio-desc">Pompe doseuse automatique (pH / chlore liquide) pour stabiliser l’eau au quotidien.</div>
              </div>
            </label>
          </div>
        </div>

        <!-- Bâches & enrouleur -->
        <div class="config-group">
          <label>Bâches & enrouleur</label>
          <div class="config-check-group" id="config-baches">
            <label class="config-check-option">
              <input type="checkbox" name="bache" value="Bâche été">
              <div>
                <div class="config-check-option-title">Bâche été</div>
                <div class="config-check-option-desc">Bâche à bulles pour limiter l’évaporation et garder la chaleur.</div>
              </div>
            </label>
            <label class="config-check-option">
              <input type="checkbox" name="bache" value="Bâche hiver">
              <div>
                <div class="config-check-option-title">Bâche hiver</div>
                <div class="config-check-option-desc">Bâche opaque pour la mise en hivernage du bassin.</div>
              </div>
            </label>
            <label class="config-check-option">
              <input type="checkbox" name="bache" value="Enrouleur inox">
              <div>
                <div class="config-check-option-title">Enrouleur inox</div>
                <div class="config-check-option-desc">Enrouleur inox pour manipuler facilement la bâche été.</div>
              </div>
            </label>
          </div>
        </div>

        <!-- Couverture / sécurité -->
        <div class="config-group">
          <label>Couverture / sécurité</label>
          <div class="config-radio-group" id="config-couverture">
            <label class="config-radio-option active">
              <input type="radio" name="couverture" value="Aucune couverture spécifique" checked>
              <div>
                <div class="config-radio-title">À définir ensemble</div>
                <div class="config-radio-desc">Nous verrons ensemble la solution la plus adaptée à votre projet.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="couverture" value="Couverture à barres">
              <div>
                <div class="config-radio-title">Couverture à barres</div>
                <div class="config-radio-desc">Sécurité renforcée et meilleure isolation.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="couverture" value="Volet à lamelles manuel">
              <div>
                <div class="config-radio-title">Volet à lamelles manuel</div>
                <div class="config-radio-desc">Volet hors-sol à lamelles, manœuvre manuelle, haut niveau de sécurité.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="couverture" value="Volet à lamelles motorisé">
              <div>
                <div class="config-radio-title">Volet à lamelles motorisé</div>
                <div class="config-radio-desc">Volet motorisé, confort d’usage maximal et esthétique soignée.</div>
              </div>
            </label>
          </div>
        </div>

        <!-- Entretien -->
        <div class="config-group">
          <label>Entretien</label>
          <div class="config-radio-group" id="config-entretien">
            <label class="config-radio-option active">
              <input type="radio" name="entretien" value="Sans robot" checked>
              <div>
                <div class="config-radio-title">Sans robot</div>
                <div class="config-radio-desc">Entretien manuel classique.</div>
              </div>
            </label>
            <label class="config-radio-option">
              <input type="radio" name="entretien" value="Avec robot nettoyeur">
              <div>
                <div class="config-radio-title">Avec robot nettoyeur</div>
                <div class="config-radio-desc">Robot autonome pour faciliter l’entretien du bassin.</div>
              </div>
            </label>
          </div>
        </div>

        <!-- Confort & loisirs -->
        <div class="config-group">
          <label>Confort & loisirs</label>
          <div class="config-check-group" id="config-loisir">
            <label class="config-check-option">
              <input type="checkbox" name="loisir" value="Éclairage LED couleur (RGB)">
              <div>
                <div class="config-check-option-title">Éclairage LED couleur</div>
                <div class="config-check-option-desc">
                  Spots LED RGB pour changer l’ambiance du bassin.
                  Dans les packs Confort et Luxe, un éclairage LED blanc est déjà inclus&nbsp;: cette option permet de passer en couleur.
                </div>
              </div>
            </label>
            <label class="config-check-option">
              <input type="checkbox" name="loisir" value="Douche solaire extérieure">
              <div>
                <div class="config-check-option-title">Douche solaire extérieure</div>
                <div class="config-check-option-desc">Douche solaire pratique avant et après la baignade.</div>
              </div>
            </label>
            <label class="config-check-option">
              <input type="checkbox" name="loisir" value="Nage à contre-courant">
              <div>
                <div class="config-check-option-title">Nage à contre-courant</div>
                <div class="config-check-option-desc">Équipement sportif pour transformer votre bassin en couloir de nage.</div>
              </div>
            </label>
          </div>
        </div>

        <!-- Évacuation des terres (cas par cas) -->
        <div class="config-group" id="config-evac-block" style="margin-top:1.5rem;">
          <label>Évacuation des terres</label>

          <div class="config-radio-group" id="config-evac">
            <label class="config-radio-option active">
              <input type="radio" name="evacuation" value="Non" checked>
              <div>
                <div class="config-radio-title">Pas d’évacuation</div>
                <div class="config-radio-desc">Les terres peuvent être étalées sur place.</div>
              </div>
            </label>

            <label class="config-radio-option">
              <input type="radio" name="evacuation" value="Oui">
              <div>
                <div class="config-radio-title">Évacuation nécessaire</div>
                <div class="config-radio-desc">Selon le terrain et l’accès, un volume peut être évacué.</div>
              </div>
            </label>
          </div>

          <div id="config-evac-volume-row" style="display:none; margin-top:0.8rem;">
            <label for="config-evac-m3">Volume estimé (m³)</label>
            <input type="number" id="config-evac-m3" class="config-input"
                   min="0" step="1" value="0">
            <small>Estimation automatique selon pack, ajustable après visite si besoin.</small>
          </div>
        </div>

        <!-- Terrasse / plage autour -->
        <div class="config-group" id="config-plage-block">
          <label>Plage / terrasse autour de la piscine</label>

          <div class="config-radio-group" id="config-plage-materiau">
            <label class="config-radio-option active">
              <input type="radio" name="plage_materiau" value="Aucune" checked>
              <div>
                <div class="config-radio-title">Pas de plage / terrasse</div>
                <div class="config-radio-desc">Je souhaite uniquement la piscine.</div>
              </div>
            </label>

            <label class="config-radio-option">
              <input type="radio" name="plage_materiau" value="Bois">
              <div>
                <div class="config-radio-title">Terrasse en bois</div>
                <div class="config-radio-desc">Bois traité classe IV, rendu naturel et chaleureux.</div>
              </div>
            </label>

            <label class="config-radio-option">
              <input type="radio" name="plage_materiau" value="Composite">
              <div>
                <div class="config-radio-title">Composite imitation bois</div>
                <div class="config-radio-desc">Zéro entretien, look bois haut de gamme.</div>
              </div>
            </label>

            <label class="config-radio-option">
              <input type="radio" name="plage_materiau" value="Gres cerame">
              <div>
                <div class="config-radio-title">Grès cérame imitation pierre bleue</div>
                <div class="config-radio-desc">Style contemporain, durable, antidérapant.</div>
              </div>
            </label>
          </div>

          <div class="config-group" style="margin-top:12px;">
            <label for="config-plage-surface">Surface estimée de la terrasse (m²)</label>
            <input type="number" id="config-plage-surface" class="config-input" min="0" step="0.5" value="0">
            <small>Par défaut, nous calculons un pourtour de ±1 m autour du bassin, ajustable selon votre projet.</small>
          </div>
        </div>

      </div> <!-- FIN ETAPE 3 -->

            <!-- ETAPE 4 : COORDONNÉES -->
      <div class="config-step" data-step="4">
        <div class="config-group">
          <label for="config-prenom">Prénom *</label>
          <input type="text" id="config-prenom" class="config-input" placeholder="Votre prénom">
        </div>
        <div class="config-group">
          <label for="config-nom">Nom *</label>
          <input type="text" id="config-nom" class="config-input" placeholder="Votre nom">
        </div>
        <div class="config-group">
          <label for="config-email">E-mail *</label>
          <input type="email" id="config-email" class="config-input" placeholder="exemple@domaine.be">
          <small>Nous vous envoyons votre configuration détaillée par e-mail et affichons l’estimation à l’écran.</small>
        </div>
        <div class="config-group">
          <label for="config-tel">Téléphone</label>
          <input type="text" id="config-tel" class="config-input" placeholder="Optionnel, mais pratique pour vous rappeler.">
        </div>

        <div class="config-group">
          <label for="config-delai">Quand souhaitez-vous réaliser votre projet&nbsp;?</label>
          <select id="config-delai" class="config-select">
            <option value="Je découvre les prix pour l’instant">Je découvre les prix pour l’instant</option>
            <option value="Dans les 3 à 6 mois">Dans les 3 à 6 mois</option>
            <option value="Dans les 6 à 12 mois">Dans les 6 à 12 mois</option>
            <option value="Pour la saison suivante">Pour la saison suivante</option>
          </select>
        </div>

        <div class="config-group">
          <label for="config-contact-pref">Comment préférez-vous que l’on vous contacte&nbsp;?</label>
          <select id="config-contact-pref" class="config-select">
            <option value="E-mail uniquement">E-mail uniquement</option>
            <option value="Téléphone (en journée)">Téléphone (en journée)</option>
            <option value="Téléphone (en soirée)">Téléphone (en soirée)</option>
            <option value="E-mail + téléphone si besoin">E-mail + téléphone si besoin</option>
          </select>
        </div>

        <div class="config-group">
          <label for="config-message">Précisions sur votre projet</label>
          <textarea id="config-message" class="config-input" rows="3"
            placeholder="Ex. : accès par le côté, terrain légèrement en pente, envie de plage autour de la piscine…"></textarea>
        </div>

        <div class="config-group">
          <small>* Champs obligatoires pour afficher l’estimation.</small>
        </div>
      </div> <!-- FIN ETAPE 4 -->

      <!-- NAVIGATION ENTRE ETAPES -->
      <div class="config-nav">
        <div class="config-nav-left">
          <button type="button" class="btn-text" id="config-back" disabled>
            &larr; Étape précédente
          </button>
        </div>
        <div class="config-nav-right">
          <button type="button" class="btn-secondary" id="config-cancel">
            Réinitialiser
          </button>
          <button type="button" class="btn-primary" id="config-next">
            Étape suivante
          </button>
        </div>
      </div>
    </div> <!-- fin .config-card -->

    <!-- COLONNE DROITE : RÉCAP & ESTIMATION -->
    <aside class="config-summary-card" id="config-summary">
      <h2>Récapitulatif & estimation</h2>
      <p>
        À chaque étape, nous mettons à jour ce récapitulatif pour vous donner une vision claire de votre projet.
        L’estimation reste indicative et sera validée après visite sur place.
      </p>

      <div class="config-summary-section">
        <strong>Projet :</strong>
        <ul class="config-summary-list">
          <li id="summary-type-projet">Piscine seule</li>
          <li id="summary-terrain">Terrain : plat</li>
          <li id="summary-code-postal">Code postal : à préciser</li>
          <li id="summary-pose">Pose : hors-sol</li>

        </ul>
      </div>

      <div class="config-summary-section">
        <strong>Pack choisi :</strong>
        <ul class="config-summary-list">
          <li id="summary-pack">Essentiel</li>
          <li id="summary-budget">Budget envisagé : 20 000 – 30 000 €</li>
        </ul>
      </div>

            <div class="config-summary-section">
        <strong>Options :</strong>
        <ul class="config-summary-list">
          <li id="summary-chauffage">Chauffage : pas de chauffage</li>
          <li id="summary-traitement">Traitement : manuel</li>
          <li id="summary-baches">Bâches : aucune sélection</li>
          <li id="summary-couverture">Couverture : à définir</li>
          <li id="summary-entretien">Entretien : sans robot</li>
          <li id="summary-loisir">Loisirs : aucun équipement spécifique</li>
          <li id="summary-liner">Couleur du liner : blue</li>
          <li id="summary-evac">Évacuation : non</li>

          <li id="summary-plage">Plage/terrasse : aucune</li>

        </ul>
      </div>

<div class="config-summary-section">
  <strong>Coordonnées & projet :</strong>
  <ul class="config-summary-list">
    <li id="summary-delai">Délai souhaité : à préciser</li>
    <li id="summary-contact-pref">Contact : à préciser</li>
  </ul>
</div>

      <div class="config-price-zone">
        <div class="config-price-label">Estimation indicative TVAC</div>
        <div class="config-price-value" id="summary-price">–</div>
        <div class="config-price-note">
          Estimation basée sur le pack et les options sélectionnées, hors contraintes spécifiques de terrain
          (accès, niveau de terrassement, particularités techniques).
        </div>
      </div>

      <div class="config-legal">
        En validant votre configuration, vous acceptez que LC Création vous contacte au sujet de votre projet.
        Aucun spam, aucun engagement : uniquement lié à votre demande de piscine bois.
      </div>
    </aside>
  </section>

</main>

<script>
(function () {
  
  var totalSteps = 4;
  var currentStep = 1;
  var estimationUnlocked = false;

  var evacVolumeRow = document.getElementById("config-evac-volume-row");
  var evacM3Input = document.getElementById("config-evac-m3");

  var stepEls = document.querySelectorAll(".config-step");
  var pillEls = document.querySelectorAll(".config-step-pill");
  var stepCurrentEl = document.getElementById("config-step-current");
  var stepTotalEl = document.getElementById("config-step-total");
  var backBtn = document.getElementById("config-back");
  var nextBtn = document.getElementById("config-next");
  var cancelBtn = document.getElementById("config-cancel");
  var priceEl = document.getElementById("summary-price");

  var plageBlock = document.getElementById("config-plage-block");
  var plageSurfaceInput = document.getElementById("config-plage-surface");

  if (stepTotalEl) stepTotalEl.textContent = totalSteps;

  // === 3. Scroll en haut du formulaire à chaque changement d'étape ===
  function scrollToConfigTop() {
    var form = document.getElementById("config-form");
    if (!form) return;

    var headerOffset = 90;
    var y = form.getBoundingClientRect().top + window.pageYOffset - headerOffset;

    window.scrollTo({
      top: y,
      behavior: "smooth"
    });
  }

  function showStep(step) {
    currentStep = step;

    for (var i = 0; i < stepEls.length; i++) {
      var el = stepEls[i];
      el.classList.toggle("active", Number(el.getAttribute("data-step")) === step);
    }

    for (var j = 0; j < pillEls.length; j++) {
      var pill = pillEls[j];
      pill.classList.toggle("active", Number(pill.getAttribute("data-step-pill")) === step);
    }

    if (stepCurrentEl) stepCurrentEl.textContent = step;
    if (backBtn) backBtn.disabled = (step === 1);
    if (nextBtn) {
      nextBtn.textContent = (step === totalSteps)
        ? "Voir mon estimation"
        : "Étape suivante";
    }

    scrollToConfigTop();
  }

  // === 4. Cartes radio ===
  var radioOptions = document.querySelectorAll(".config-radio-option");
  for (var r = 0; r < radioOptions.length; r++) {
    (function(option) {
      var input = option.querySelector('input[type="radio"]');
      if (!input) return;

      option.addEventListener("click", function(e) {
        if (e.target === input) return;
        input.checked = true;
        var name = input.name;
        var allWithName = document.querySelectorAll('.config-radio-option input[name="' + name + '"]');
        for (var k = 0; k < allWithName.length; k++) {
          var opt = allWithName[k].closest(".config-radio-option");
          if (opt) opt.classList.remove("active");
        }
        option.classList.add("active");
        updateSummary();
      });

      input.addEventListener("change", function() {
        var name = input.name;
        var allWithName = document.querySelectorAll('.config-radio-option input[name="' + name + '"]');
        for (var k = 0; k < allWithName.length; k++) {
          var opt = allWithName[k].closest(".config-radio-option");
          if (opt) opt.classList.remove("active");
        }
        option.classList.add("active");
        updateSummary();
      });
    })(radioOptions[r]);
  }

  // === 5. Cartes checkbox ===
  var checkOptions = document.querySelectorAll(".config-check-option");
  for (var c = 0; c < checkOptions.length; c++) {
    (function(option) {
      var input = option.querySelector('input[type="checkbox"]');
      if (!input) return;

      option.addEventListener("click", function(e) {
        if (e.target === input) return;
        input.checked = !input.checked;
        option.classList.toggle("active", input.checked);
        updateSummary();
      });

      input.addEventListener("change", function() {
        option.classList.toggle("active", input.checked);
        updateSummary();
      });
    })(checkOptions[c]);
  }

  // === 6. Afficher / cacher la plage selon le type de projet ===
  function togglePlageVisibility() {
    var checked = document.querySelector('input[name="type_projet"]:checked');
    var typeProjet = checked ? checked.value : "";

    var needsPlage =
      typeProjet === "Piscine + terrasse / plage" ||
      typeProjet === "Piscine + réaménagement complet du jardin";

    if (plageBlock) {
      plageBlock.style.display = needsPlage ? "block" : "none";
    }

    if (!needsPlage) {
      var radioAucune = document.querySelector('input[name="plage_materiau"][value="Aucune"]');
      if (radioAucune) radioAucune.checked = true;
      if (plageSurfaceInput) plageSurfaceInput.value = 0;
    }
  }

  var typeProjetRadios = document.querySelectorAll('input[name="type_projet"]');
  for (var t = 0; t < typeProjetRadios.length; t++) {
    typeProjetRadios[t].addEventListener("change", function() {
      togglePlageVisibility();
      updateSummary();
    });
  }

  togglePlageVisibility();

  // === 7. Mise à jour du récapitulatif + prix ===
  function updateSummary() {
    // --- Projet
    var typeProjetEl = document.querySelector('input[name="type_projet"]:checked');
    var typeProjet = typeProjetEl ? typeProjetEl.value : "Piscine seule";
    document.getElementById("summary-type-projet").textContent = typeProjet;

    var terrainEl = document.getElementById("config-terrain");
    var terrain = terrainEl ? terrainEl.value : "Plat";
    document.getElementById("summary-terrain").textContent =
      "Terrain : " + terrain.toLowerCase();

    var cpEl = document.getElementById("config-code-postal");
    var cp = (cpEl && cpEl.value) ? cpEl.value : "à préciser";
    document.getElementById("summary-code-postal").textContent =
      "Code postal : " + cp;

    // --- Pack
    var packEl = document.querySelector('input[name="pack"]:checked');
    var pack = packEl ? packEl.value : "Essentiel";
    document.getElementById("summary-pack").textContent = pack;

    // --- Couleur liner
    var linerEl = document.querySelector('input[name="liner_color"]:checked');
    var linerColor = linerEl ? linerEl.value : "Blue";
    var summaryLinerEl = document.getElementById("summary-liner");
    if (summaryLinerEl) {
      summaryLinerEl.textContent = "Couleur du liner : " + linerColor.toLowerCase();
    }
    var linerImg = document.getElementById("config-liner-image");
    if (linerImg) {
      var src = "./liner blue.jpg";
      if (linerColor === "Sand") src = "./liner sand.jpg";
      if (linerColor === "Grey") src = "./liner grey.jpg";
      linerImg.src = src;
      linerImg.alt = "Liner " + linerColor;
    }

    // --- Évacuation
    var defaultEvacM3 = {
      Urbain: 18,
      Essentiel: 30,
      Confort: 46,
      Luxe: 60
    };

    var evacEl = document.querySelector('input[name="evacuation"]:checked');
    var evacChoice = evacEl ? evacEl.value : "Non";

    if (evacChoice === "Oui") {
      if (evacVolumeRow) evacVolumeRow.style.display = "block";
      var auto = defaultEvacM3[pack] || 0;
      var currentVal = evacM3Input ? Number(evacM3Input.value || 0) : 0;

      // si 0 ou encore une ancienne valeur auto, on met la valeur du pack
      var knownDefaults = [18, 30, 46, 60];
      var isAutoLike = knownDefaults.indexOf(currentVal) !== -1;

      if (evacM3Input && (currentVal === 0 || isAutoLike)) {
        evacM3Input.value = auto;
      }
    } else {
      if (evacVolumeRow) evacVolumeRow.style.display = "none";
      if (evacM3Input) evacM3Input.value = 0;
    }

    var evacM3 = evacM3Input ? Number(evacM3Input.value || 0) : 0;
    if (evacChoice === "Oui" && evacM3 > 0) {
      document.getElementById("summary-evac").textContent =
        "Évacuation : oui (" + evacM3 + " m³)";
    } else {
      document.getElementById("summary-evac").textContent = "Évacuation : non";
    }

    // --- Surface terrasse auto (pourtour 1 m)
    var packSizes = {
      Urbain: { L: 3.5, W: 2.7 },  // approx. 9 m²
      Essentiel: { L: 5.2, W: 3.2 },
      Confort: { L: 6.2, W: 4.2 },
      Luxe: { L: 8.35, W: 4.9 }
    };
    var size = packSizes[pack];
    if (size && plageSurfaceInput) {
      var b = 1;
      var autoSurface = (size.L + 2 * b) * (size.W + 2 * b) - size.L * size.W;
      if (!plageSurfaceInput.value || Number(plageSurfaceInput.value) === 0) {
        plageSurfaceInput.value = autoSurface.toFixed(1);
      }
    }

    // --- Budget
    var budgetSelect = document.getElementById("config-budget");
    var budgetVal = budgetSelect ? budgetSelect.value : "20-30k";
    var budgetLabel = "20 000 – 30 000 €";
    if (budgetVal === "15-20k") budgetLabel = "15 000 – 20 000 €";
    if (budgetVal === "30-40k") budgetLabel = "30 000 – 40 000 €";
    if (budgetVal === "40k+") budgetLabel = "Plus de 40 000 €";
    document.getElementById("summary-budget").textContent =
      "Budget envisagé : " + budgetLabel;

    // --- Options principales
    var chauffageEl = document.querySelector('input[name="chauffage"]:checked');
    var chauffage = chauffageEl ? chauffageEl.value : "Pas de chauffage";
    document.getElementById("summary-chauffage").textContent =
      "Chauffage : " + chauffage.toLowerCase();

    var traitementEl = document.querySelector('input[name="traitement"]:checked');
    var traitement = traitementEl ? traitementEl.value : "Traitement manuel";
    document.getElementById("summary-traitement").textContent =
      "Traitement : " + traitement;

    var couvertureEl = document.querySelector('input[name="couverture"]:checked');
    var couvertureVal = couvertureEl ? couvertureEl.value : "Aucune couverture spécifique";
    document.getElementById("summary-couverture").textContent =
      "Couverture : " +
      (couvertureVal === "Aucune couverture spécifique"
        ? "à définir ensemble"
        : couvertureVal);

    // Entretien (robot inclus d’office en Luxe)
    var entretienEl = document.querySelector('input[name="entretien"]:checked');
    var entretienValue = entretienEl ? entretienEl.value : "Sans robot";
    var entretienText = "";
    if (pack === "Luxe") {
      entretienValue = "Avec robot nettoyeur";
      entretienText = "avec robot nettoyeur (inclus dans le pack Luxe)";
    } else {
      entretienText = entretienValue.toLowerCase();
    }
    document.getElementById("summary-entretien").textContent =
      "Entretien : " + entretienText;

    // Bâches & enrouleur
    var bacheChecked = document.querySelectorAll('input[name="bache"]:checked');
    var summaryBachesEl = document.getElementById("summary-baches");

    if (pack === "Essentiel" ) {
      if (bacheChecked.length === 0) {
        summaryBachesEl.textContent = "Bâches : aucune sélection";
      } else {
        var labelsBaches = [];
        for (var bi = 0; bi < bacheChecked.length; bi++) {
          labelsBaches.push(bacheChecked[bi].value);
        }
        summaryBachesEl.textContent = "Bâches : " + labelsBaches.join(", ");
      }
    } else if (pack === "Confort") {
      var txt = "Bâches : été + hiver incluses dans le pack Confort";
      var hasEnrouleur = false;
      for (var bj = 0; bj < bacheChecked.length; bj++) {
        if (bacheChecked[bj].value === "Enrouleur inox") hasEnrouleur = true;
      }
      if (hasEnrouleur) txt += ", enrouleur inox en option";
      summaryBachesEl.textContent = txt;
    } else if (pack === "Luxe") {
      summaryBachesEl.textContent =
        "Bâches : été + hiver + enrouleur inox inclus dans le pack Luxe";
    }

    // Loisirs
    var loisirChecked = document.querySelectorAll('input[name="loisir"]:checked');
    var summaryLoisirEl = document.getElementById("summary-loisir");
    if (loisirChecked.length === 0) {
      if (pack === "Essentiel" ) {
        summaryLoisirEl.textContent = "Loisirs : aucun équipement spécifique";
      } else {
        summaryLoisirEl.textContent = "Loisirs : éclairage LED blanc inclus dans le pack";
      }
    } else {
      var labels = [];
      for (var li = 0; li < loisirChecked.length; li++) {
        labels.push(loisirChecked[li].value);
      }
      var baseText = "";
      if (pack === "Confort" || pack === "Luxe") {
        baseText = "éclairage LED blanc inclus, options : ";
      }
      summaryLoisirEl.textContent = "Loisirs : " + baseText + labels.join(", ");
    }

    // Délai & contact
    var delaiSel = document.getElementById("config-delai");
    var delai = delaiSel ? delaiSel.value : "à préciser";
    document.getElementById("summary-delai").textContent =
      "Délai souhaité : " + delai;

    var contactSel = document.getElementById("config-contact-pref");
    var contactPref = contactSel ? contactSel.value : "à préciser";
    document.getElementById("summary-contact-pref").textContent =
      "Contact : " + contactPref;

    // Plage / terrasse
    var plageMatEl = document.querySelector('input[name="plage_materiau"]:checked');
    var plageMateriau = plageMatEl ? plageMatEl.value : "Aucune";
    var plageSurface = plageSurfaceInput ? Number(plageSurfaceInput.value || 0) : 0;

    var plageLabel = "aucune";
    if (plageMateriau !== "Aucune" && plageSurface > 0) {
      var labelNice = (plageMateriau === "Gres cerame")
        ? "grès cérame imitation pierre bleue"
        : plageMateriau.toLowerCase();
      plageLabel = labelNice + " — " + plageSurface.toFixed(1) + " m²";
    }
    document.getElementById("summary-plage").textContent =
      "Plage/terrasse : " + plageLabel;

    // === CALCUL PRIX ===
    var basePrices = {
    
      Essentiel: 15490,
      Confort: 19490,
      Luxe: 23990
    };
    var packBase = basePrices[pack] || 0;

    var optionsTotal = 0;

    // Liner
    if (linerColor === "Sand" || linerColor === "Grey") {
      optionsTotal += 175;
    }

    // Chauffage
    if (chauffage === "Pompe à chaleur") optionsTotal += 3500;

    // Traitement
    if (traitement === "Électrolyseur au sel") optionsTotal += 1800;
    if (traitement === "Électrolyseur + régulation pH") optionsTotal += 3200;
    if (traitement === "Pompe doseuse") optionsTotal += 1800;

    // Couverture
    if (couvertureVal === "Couverture à barres") optionsTotal += 2000;
    if (couvertureVal === "Volet à lamelles manuel") optionsTotal += 3800;
    if (couvertureVal === "Volet à lamelles motorisé") optionsTotal += 5800;

    // Bâches
    var bachesTotal = 0;
    if (pack === "Essentiel" || pack === "Urbain") {
      for (var bb = 0; bb < bacheChecked.length; bb++) {
        var valB = bacheChecked[bb].value;
        if (valB === "Bâche été") bachesTotal += 600;
        if (valB === "Bâche hiver") bachesTotal += 700;
        if (valB === "Enrouleur inox") bachesTotal += 450;
      }
    } else if (pack === "Confort") {
      var hasEnr = false;
      for (var bc = 0; bc < bacheChecked.length; bc++) {
        if (bacheChecked[bc].value === "Enrouleur inox") hasEnr = true;
      }
      if (hasEnr) bachesTotal += 450;
    }
    optionsTotal += bachesTotal;

    // Entretien (robot) hors Luxe
    if (pack !== "Luxe" && entretienValue === "Avec robot nettoyeur") {
      optionsTotal += 1800;
    }

    // Loisirs
    for (var ls = 0; ls < loisirChecked.length; ls++) {
      var valL = loisirChecked[ls].value;
      if (valL === "Éclairage LED couleur (RGB)") optionsTotal += 600;
      if (valL === "Douche solaire extérieure") optionsTotal += 800;
      if (valL === "Nage à contre-courant") optionsTotal += 6500;
    }

    // Plage / terrasse
    var plageTotal = 0;
    var plagePricesPerM2 = {
      Bois: 140,
      Composite: 190,
      "Gres cerame": 220
    };
    if (plageMateriau !== "Aucune" && plageSurface > 0) {
      plageTotal = plageSurface * (plagePricesPerM2[plageMateriau] || 0);
    }

    // Coeff pose sur le pack
    var poseEl = document.querySelector('input[name="pose"]:checked');
    var pose = poseEl ? poseEl.value : "Hors-sol";
    var coeffPose = 1.0;
    if (pose === "Semi-enterrée") coeffPose = 1.1;
    if (pose === "Enterrée") coeffPose = 1.2;
    var packAvecPose = packBase * coeffPose;

    // Évacuation
    var evacTotal = 0;
    if (evacChoice === "Oui" && evacM3 > 0) {
      var evacPricePerM3HTVA = 80;
      var evacPriceTVAC = evacPricePerM3HTVA * 1.21;
      evacTotal = evacM3 * evacPriceTVAC;
    }

    var price = packAvecPose + optionsTotal + plageTotal + evacTotal;
    var rounded = Math.round(price / 100) * 100;

    if (!estimationUnlocked) {
      priceEl.textContent = "—";
    } else {
      priceEl.textContent = rounded.toLocaleString("fr-BE", {
        style: "currency",
        currency: "EUR",
        maximumFractionDigits: 0
      });
    }

    document.getElementById("summary-pose").textContent =
      "Pose : " + pose.toLowerCase();
  }

  // === 8. Validation étape 4 ===
  function validateStep4() {
    var prenom = document.getElementById("config-prenom").value.trim();
    var nom = document.getElementById("config-nom").value.trim();
    var email = document.getElementById("config-email").value.trim();
    if (!prenom || !nom || !email) {
      alert("Merci de compléter au minimum votre prénom, nom et e-mail pour afficher votre estimation.");
      return false;
    }
    return true;
  }

  // === 9. Navigation étapes ===
  if (backBtn) {
    backBtn.addEventListener("click", function () {
      if (currentStep > 1) {
        showStep(currentStep - 1);
      }
    });
  }

  if (nextBtn) {
    nextBtn.addEventListener("click", function () {
      if (currentStep < totalSteps) {
        showStep(currentStep + 1);
        return;
      }

      if (!validateStep4()) return;

      estimationUnlocked = true;
      updateSummary();

      // Récup données pour l'email
      var prenom = document.getElementById("config-prenom").value.trim();
      var nom = document.getElementById("config-nom").value.trim();
      var emailClient = document.getElementById("config-email").value.trim();
      var tel = document.getElementById("config-tel").value.trim();
      var message = document.getElementById("config-message").value.trim();
      var codePostal = document.getElementById("config-code-postal").value.trim();

      var typeProjetEl = document.querySelector('input[name="type_projet"]:checked');
      var typeProjet = typeProjetEl ? typeProjetEl.value : "";
      var terrain = document.getElementById("config-terrain").value;
      var packEl = document.querySelector('input[name="pack"]:checked');
      var pack = packEl ? packEl.value : "";

      var budgetText = document.getElementById("summary-budget").textContent || "";
      var chauffageTxt = document.getElementById("summary-chauffage").textContent || "";
      var traitementTxt = document.getElementById("summary-traitement").textContent || "";
      var couvertureTxt = document.getElementById("summary-couverture").textContent || "";
      var entretienTxt = document.getElementById("summary-entretien").textContent || "";
      var loisirsTxt = document.getElementById("summary-loisir").textContent || "";
      var delaiTxt = document.getElementById("summary-delai").textContent || "";
      var contactPrefTxt = document.getElementById("summary-contact-pref").textContent || "";
      var estimationText = document.getElementById("summary-price").textContent || "—";

      var payload = {
        prenom: prenom,
        nom: nom,
        emailClient: emailClient,
        tel: tel,
        message: message,
        codePostal: codePostal,
        terrain: terrain,
        typeProjet: typeProjet,
        pack: pack,
        budgetText: budgetText,
        chauffageTxt: chauffageTxt,
        traitementTxt: traitementTxt,
        couvertureTxt: couvertureTxt,
        entretienTxt: entretienTxt,
        loisirsTxt: loisirsTxt,
        delaiTxt: delaiTxt,
        contactPrefTxt: contactPrefTxt,
        estimationText: estimationText,
        modele: modeleSelectionne,
        website: ""
      };

      fetch("/api/send-piscine-lead", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      })
        .then(function (res) { return res.json(); })
        .then(function (data) {
          if (!data.ok) {
            throw new Error(data.error || "Erreur inconnue");
          }
          alert("Merci ! Votre demande a bien été envoyée. Nous vous recontactons rapidement.");
          nextBtn.disabled = true;
          nextBtn.textContent = "Demande envoyée ✅";
        })
        .catch(function (err) {
          console.error(err);
          alert("Oups, problème d’envoi. Merci de réessayer ou de nous appeler.");
        });
    });
  }

  // Bouton réinitialiser
  if (cancelBtn) {
    cancelBtn.addEventListener("click", function () {
      estimationUnlocked = false;
      window.location.reload();
    });
  }

  // Mise à jour auto du résumé
  var allInputs = document.querySelectorAll("input, select, textarea");
  for (var ai = 0; ai < allInputs.length; ai++) {
    allInputs[ai].addEventListener("change", updateSummary);
    allInputs[ai].addEventListener("input", updateSummary);
  }

  // === Initialisation ===
  showStep(1);
  updateSummary();
})();
</script>

 
</body>
</html>
